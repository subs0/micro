{
  "data": {
    "type": "provider-docs",
    "id": "3197947",
    "attributes": {
      "category": "resources",
      "content": "---\nsubcategory: \"API Gateway V2\"\nlayout: \"aws\"\npage_title: \"AWS: aws_apigatewayv2_api\"\ndescription: |-\n  Manages an Amazon API Gateway Version 2 API.\n---\n\n# Resource: aws_apigatewayv2_api\n\nManages an Amazon API Gateway Version 2 API.\n\n-> **Note:** Amazon API Gateway Version 2 resources are used for creating and deploying WebSocket and HTTP APIs. To create and deploy REST APIs, use Amazon API Gateway Version 1 [resources](/docs/providers/aws/r/api_gateway_rest_api.html).\n\n## Example Usage\n\n### Basic WebSocket API\n\n```terraform\nresource \"aws_apigatewayv2_api\" \"example\" {\n  name                       = \"example-websocket-api\"\n  protocol_type              = \"WEBSOCKET\"\n  route_selection_expression = \"$request.body.action\"\n}\n```\n\n### Basic HTTP API\n\n```terraform\nresource \"aws_apigatewayv2_api\" \"example\" {\n  name          = \"example-http-api\"\n  protocol_type = \"HTTP\"\n}\n```\n\n## Argument Reference\n\nThis resource supports the following arguments:\n\n* `name` - (Required) Name of the API. Must be less than or equal to 128 characters in length.\n* `protocol_type` - (Required) API protocol. Valid values: `HTTP`, `WEBSOCKET`.\n* `api_key_selection_expression` - (Optional) An [API key selection expression](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-websocket-api-selection-expressions.html#apigateway-websocket-api-apikey-selection-expressions).\nValid values: `$context.authorizer.usageIdentifierKey`, `$request.header.x-api-key`. Defaults to `$request.header.x-api-key`.\nApplicable for WebSocket APIs.\n* `cors_configuration` - (Optional) Cross-origin resource sharing (CORS) [configuration](https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-cors.html). Applicable for HTTP APIs.\n* `credentials_arn` - (Optional) Part of _quick create_. Specifies any credentials required for the integration. Applicable for HTTP APIs.\n* `description` - (Optional) Description of the API. Must be less than or equal to 1024 characters in length.\n* `disable_execute_api_endpoint` - (Optional) Whether clients can invoke the API by using the default `execute-api` endpoint.\nBy default, clients can invoke the API with the default `{api_id}.execute-api.{region}.amazonaws.com endpoint`.\nTo require that clients use a custom domain name to invoke the API, disable the default endpoint.\n* `route_key` - (Optional) Part of _quick create_. Specifies any [route key](https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-develop-routes.html). Applicable for HTTP APIs.\n* `route_selection_expression` - (Optional) The [route selection expression](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-websocket-api-selection-expressions.html#apigateway-websocket-api-route-selection-expressions) for the API.\nDefaults to `$request.method $request.path`.\n* `tags` - (Optional) Map of tags to assign to the API. If configured with a provider [`default_tags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block) present, tags with matching keys will overwrite those defined at the provider-level.\n* `target` - (Optional) Part of _quick create_. Quick create produces an API with an integration, a default catch-all route, and a default stage which is configured to automatically deploy changes.\nFor HTTP integrations, specify a fully qualified URL. For Lambda integrations, specify a function ARN.\nThe type of the integration will be `HTTP_PROXY` or `AWS_PROXY`, respectively. Applicable for HTTP APIs.\n* `body` - (Optional) An OpenAPI specification that defines the set of routes and integrations to create as part of the HTTP APIs. Supported only for HTTP APIs.\n* `version` - (Optional) Version identifier for the API. Must be between 1 and 64 characters in length.\n* `fail_on_warnings` - (Optional) Whether warnings should return an error while API Gateway is creating or updating the resource using an OpenAPI specification. Defaults to `false`. Applicable for HTTP APIs.\n\n__Note__: If the `body` argument is provided, the OpenAPI specification will be used to configure the integrations and route for the HTTP API. If this argument is provided, the following resources should not be managed as separate ones, as updates may cause manual resource updates to be overwritten:\n\n* `aws_apigatewayv2_integration`\n* `aws_apigatewayv2_route`\n\nFurther more, the `name`, `description`, `cors_configuration`, `tags` and `version` fields should be specified in the Terraform configuration and the values will override any values specified in the OpenAPI document.\n\nThe `cors_configuration` object supports the following:\n\n* `allow_credentials` - (Optional) Whether credentials are included in the CORS request.\n* `allow_headers` - (Optional) Set of allowed HTTP headers.\n* `allow_methods` - (Optional) Set of allowed HTTP methods.\n* `allow_origins` - (Optional) Set of allowed origins.\n* `expose_headers` - (Optional) Set of exposed HTTP headers.\n* `max_age` - (Optional) Number of seconds that the browser should cache preflight request results.\n\n## Attribute Reference\n\nThis resource exports the following attributes in addition to the arguments above:\n\n* `id` - API identifier.\n* `api_endpoint` - URI of the API, of the form `https://{api-id}.execute-api.{region}.amazonaws.com` for HTTP APIs and `wss://{api-id}.execute-api.{region}.amazonaws.com` for WebSocket APIs.\n* `arn` - ARN of the API.\n* `execution_arn` - ARN prefix to be used in an [`aws_lambda_permission`](/docs/providers/aws/r/lambda_permission.html)'s `source_arn` attribute\nor in an [`aws_iam_policy`](/docs/providers/aws/r/iam_policy.html) to authorize access to the [`@connections` API](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-how-to-call-websocket-api-connections.html).\nSee the [Amazon API Gateway Developer Guide](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-websocket-control-access-iam.html) for details.\n* `tags_all` - Map of tags assigned to the resource, including those inherited from the provider [`default_tags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block).\n\n## Import\n\nIn Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import `aws_apigatewayv2_api` using the API identifier. For example:\n\n```terraform\nimport {\n  to = aws_apigatewayv2_api.example\n  id = \"aabbccddee\"\n}\n```\n\nUsing `terraform import`, import `aws_apigatewayv2_api` using the API identifier. For example:\n\n```console\n% terraform import aws_apigatewayv2_api.example aabbccddee\n```\n",
      "language": "hcl",
      "path": "website/docs/r/apigatewayv2_api.html.markdown",
      "slug": "apigatewayv2_api",
      "subcategory": "API Gateway V2",
      "title": "apigatewayv2_api",
      "truncated": false
    },
    "links": {
      "self": "/v2/provider-docs/3197947"
    }
  }
}