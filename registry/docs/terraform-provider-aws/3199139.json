{
  "data": {
    "type": "provider-docs",
    "id": "3199139",
    "attributes": {
      "category": "resources",
      "content": "---\nsubcategory: \"WAF Classic Regional\"\nlayout: \"aws\"\npage_title: \"AWS: aws_wafregional_web_acl_association\"\ndescription: |-\n  Manages an association with WAF Regional Web ACL\n---\n\n# Resource: aws_wafregional_web_acl_association\n\nManages an association with WAF Regional Web ACL.\n\n-> **Note:** An Application Load Balancer can only be associated with one WAF Regional WebACL.\n\n## Example Usage\n\n### Application Load Balancer Association\n\n```terraform\nresource \"aws_wafregional_ipset\" \"ipset\" {\n  name = \"tfIPSet\"\n\n  ip_set_descriptor {\n    type  = \"IPV4\"\n    value = \"192.0.7.0/24\"\n  }\n}\n\nresource \"aws_wafregional_rule\" \"foo\" {\n  name        = \"tfWAFRule\"\n  metric_name = \"tfWAFRule\"\n\n  predicate {\n    data_id = aws_wafregional_ipset.ipset.id\n    negated = false\n    type    = \"IPMatch\"\n  }\n}\n\nresource \"aws_wafregional_web_acl\" \"foo\" {\n  name        = \"foo\"\n  metric_name = \"foo\"\n\n  default_action {\n    type = \"ALLOW\"\n  }\n\n  rule {\n    action {\n      type = \"BLOCK\"\n    }\n\n    priority = 1\n    rule_id  = aws_wafregional_rule.foo.id\n  }\n}\n\nresource \"aws_vpc\" \"foo\" {\n  cidr_block = \"10.1.0.0/16\"\n}\n\ndata \"aws_availability_zones\" \"available\" {}\n\nresource \"aws_subnet\" \"foo\" {\n  vpc_id            = aws_vpc.foo.id\n  cidr_block        = \"10.1.1.0/24\"\n  availability_zone = data.aws_availability_zones.available.names[0]\n}\n\nresource \"aws_subnet\" \"bar\" {\n  vpc_id            = aws_vpc.foo.id\n  cidr_block        = \"10.1.2.0/24\"\n  availability_zone = data.aws_availability_zones.available.names[1]\n}\n\nresource \"aws_alb\" \"foo\" {\n  internal = true\n  subnets  = [aws_subnet.foo.id, aws_subnet.bar.id]\n}\n\nresource \"aws_wafregional_web_acl_association\" \"foo\" {\n  resource_arn = aws_alb.foo.arn\n  web_acl_id   = aws_wafregional_web_acl.foo.id\n}\n```\n\n### API Gateway Association\n\n```terraform\nresource \"aws_wafregional_ipset\" \"ipset\" {\n  name = \"tfIPSet\"\n\n  ip_set_descriptor {\n    type  = \"IPV4\"\n    value = \"192.0.7.0/24\"\n  }\n}\n\nresource \"aws_wafregional_rule\" \"foo\" {\n  name        = \"tfWAFRule\"\n  metric_name = \"tfWAFRule\"\n\n  predicate {\n    data_id = aws_wafregional_ipset.ipset.id\n    negated = false\n    type    = \"IPMatch\"\n  }\n}\n\nresource \"aws_wafregional_web_acl\" \"foo\" {\n  name        = \"foo\"\n  metric_name = \"foo\"\n\n  default_action {\n    type = \"ALLOW\"\n  }\n\n  rule {\n    action {\n      type = \"BLOCK\"\n    }\n\n    priority = 1\n    rule_id  = aws_wafregional_rule.foo.id\n  }\n}\n\nresource \"aws_api_gateway_rest_api\" \"example\" {\n  body = jsonencode({\n    openapi = \"3.0.1\"\n    info = {\n      title   = \"example\"\n      version = \"1.0\"\n    }\n    paths = {\n      \"/path1\" = {\n        get = {\n          x-amazon-apigateway-integration = {\n            httpMethod           = \"GET\"\n            payloadFormatVersion = \"1.0\"\n            type                 = \"HTTP_PROXY\"\n            uri                  = \"https://ip-ranges.amazonaws.com/ip-ranges.json\"\n          }\n        }\n      }\n    }\n  })\n\n  name = \"example\"\n}\n\nresource \"aws_api_gateway_deployment\" \"example\" {\n  rest_api_id = aws_api_gateway_rest_api.example.id\n\n  triggers = {\n    redeployment = sha1(jsonencode(aws_api_gateway_rest_api.example.body))\n  }\n\n  lifecycle {\n    create_before_destroy = true\n  }\n}\n\nresource \"aws_api_gateway_stage\" \"example\" {\n  deployment_id = aws_api_gateway_deployment.example.id\n  rest_api_id   = aws_api_gateway_rest_api.example.id\n  stage_name    = \"example\"\n}\n\nresource \"aws_wafregional_web_acl_association\" \"association\" {\n  resource_arn = aws_api_gateway_stage.example.arn\n  web_acl_id   = aws_wafregional_web_acl.foo.id\n}\n```\n\n## Argument Reference\n\nThis resource supports the following arguments:\n\n* `web_acl_id` - (Required) The ID of the WAF Regional WebACL to create an association.\n* `resource_arn` - (Required) ARN of the resource to associate with. For example, an Application Load Balancer or API Gateway Stage.\n\n## Attribute Reference\n\nThis resource exports the following attributes in addition to the arguments above:\n\n* `id` - The ID of the association\n\n## Import\n\nIn Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import WAF Regional Web ACL Association using their `web_acl_id:resource_arn`. For example:\n\n```terraform\nimport {\n  to = aws_wafregional_web_acl_association.foo\n  id = \"web_acl_id:resource_arn\"\n}\n```\n\nUsing `terraform import`, import WAF Regional Web ACL Association using their `web_acl_id:resource_arn`. For example:\n\n```console\n% terraform import aws_wafregional_web_acl_association.foo web_acl_id:resource_arn\n```\n",
      "language": "hcl",
      "path": "website/docs/r/wafregional_web_acl_association.html.markdown",
      "slug": "wafregional_web_acl_association",
      "subcategory": "WAF Classic Regional",
      "title": "wafregional_web_acl_association",
      "truncated": false
    },
    "links": {
      "self": "/v2/provider-docs/3199139"
    }
  }
}