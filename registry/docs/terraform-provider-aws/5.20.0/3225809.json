{
  "data": {
    "type": "provider-docs",
    "id": "3225809",
    "attributes": {
      "category": "resources",
      "content": "---\nsubcategory: \"S3 Control\"\nlayout: \"aws\"\npage_title: \"AWS: aws_s3control_storage_lens_configuration\"\ndescription: |-\n  Provides a resource to manage an S3 Storage Lens configuration.\n---\n\n# Resource: aws_s3control_storage_lens_configuration\n\nProvides a resource to manage an S3 Storage Lens configuration.\n\n## Example Usage\n\n```terraform\ndata \"aws_caller_identity\" \"current\" {}\n\nresource \"aws_s3control_storage_lens_configuration\" \"example\" {\n  config_id = \"example-1\"\n\n  storage_lens_configuration {\n    enabled = true\n\n    account_level {\n      activity_metrics {\n        enabled = true\n      }\n\n      bucket_level {\n        activity_metrics {\n          enabled = true\n        }\n      }\n    }\n\n    data_export {\n      cloud_watch_metrics {\n        enabled = true\n      }\n\n      s3_bucket_destination {\n        account_id            = data.aws_caller_identity.current.account_id\n        arn                   = aws_s3_bucket.target.arn\n        format                = \"CSV\"\n        output_schema_version = \"V_1\"\n\n        encryption {\n          sse_s3 {}\n        }\n      }\n    }\n\n    exclude {\n      buckets = [aws_s3_bucket.b1.arn, aws_s3_bucket.b2.arn]\n      regions = [\"us-east-2\"]\n    }\n  }\n}\n```\n\n## Argument Reference\n\nThis resource supports the following arguments:\n\n* `account_id` - (Optional) The AWS account ID for the S3 Storage Lens configuration. Defaults to automatically determined account ID of the Terraform AWS provider.\n* `config_id` - (Required) The ID of the S3 Storage Lens configuration.\n* `storage_lens_configuration` - (Required) The S3 Storage Lens configuration. See [Storage Lens Configuration](#storage-lens-configuration) below for more details.\n* `tags` - (Optional) Key-value map of resource tags. If configured with a provider [`default_tags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block) present, tags with matching keys will overwrite those defined at the provider-level.\n\n### Storage Lens Configuration\n\nThe `storage_lens_configuration` block supports the following:\n\n* `account_level` (Required) The account-level configurations of the S3 Storage Lens configuration. See [Account Level](#account-level) below for more details.\n* `aws_org` (Optional) The Amazon Web Services organization for the S3 Storage Lens configuration. See [AWS Org](#aws-org) below for more details.\n* `data_export` (Optional) Properties of S3 Storage Lens metrics export including the destination, schema and format. See [Data Export](#data-export) below for more details.\n* `enabled` (Required) Whether the S3 Storage Lens configuration is enabled.\n* `exclude` (Optional) What is excluded in this configuration. Conflicts with `include`. See [Exclude](#exclude) below for more details.\n* `include` (Optional) What is included in this configuration. Conflicts with `exclude`. See [Include](#include) below for more details.\n\n### Account Level\n\nThe `account_level` block supports the following:\n\n* `activity_metrics` (Optional) S3 Storage Lens activity metrics. See [Activity Metrics](#activity-metrics) below for more details.\n* `advanced_cost_optimization_metrics` (Optional) Advanced cost-optimization metrics for S3 Storage Lens. See [Advanced Cost-Optimization Metrics](#advanced-cost-optimization-metrics) below for more details.\n* `advanced_data_protection_metrics` (Optional) Advanced data-protection metrics for S3 Storage Lens. See [Advanced Data-Protection Metrics](#advanced-data-protection-metrics) below for more details.\n* `bucket_level` (Required) S3 Storage Lens bucket-level configuration. See [Bucket Level](#bucket-level) below for more details.\n* `detailed_status_code_metrics` (Optional) Detailed status code metrics for S3 Storage Lens. See [Detailed Status Code Metrics](#detailed-status-code-metrics) below for more details.\n\n### Activity Metrics\n\nThe `activity_metrics` block supports the following:\n\n* `enabled` (Optional) Whether the activity metrics are enabled.\n\n### Advanced Cost-Optimization Metrics\n\nThe `advanced_cost_optimization_metrics` block supports the following:\n\n* `enabled` (Optional) Whether advanced cost-optimization metrics are enabled.\n\n### Advanced Data-Protection Metrics\n\nThe `advanced_data_protection_metrics` block supports the following:\n\n* `enabled` (Optional) Whether advanced data-protection metrics are enabled.\n\n### Detailed Status Code Metrics\n\nThe `detailed_status_code_metrics` block supports the following:\n\n* `enabled` (Optional) Whether detailed status code metrics are enabled.\n\n### Bucket Level\n\nThe `bucket_level` block supports the following:\n\n* `activity_metrics` (Optional) S3 Storage Lens activity metrics. See [Activity Metrics](#activity-metrics) above for more details.\n* `advanced_cost_optimization_metrics` (Optional) Advanced cost-optimization metrics for S3 Storage Lens. See [Advanced Cost-Optimization Metrics](#advanced-cost-optimization-metrics) above for more details.\n* `advanced_data_protection_metrics` (Optional) Advanced data-protection metrics for S3 Storage Lens. See [Advanced Data-Protection Metrics](#advanced-data-protection-metrics) above for more details.\n* `detailed_status_code_metrics` (Optional) Detailed status code metrics for S3 Storage Lens. See [Detailed Status Code Metrics](#detailed-status-code-metrics) above for more details.\n* `prefix_level` (Optional) Prefix-level metrics for S3 Storage Lens. See [Prefix Level](#prefix-level) below for more details.\n\n### Prefix Level\n\nThe `prefix_level` block supports the following:\n\n* `storage_metrics` (Required) Prefix-level storage metrics for S3 Storage Lens. See [Prefix Level Storage Metrics](#prefix-level-storage-metrics) below for more details.\n\n### Prefix Level Storage Metrics\n\nThe `storage_metrics` block supports the following:\n\n* `enabled` (Optional) Whether prefix-level storage metrics are enabled.\n* `selection_criteria` (Optional) Selection criteria. See [Selection Criteria](#selection-criteria) below for more details.\n\n### Selection Criteria\n\nThe `selection_criteria` block supports the following:\n\n* `delimiter` (Optional) The delimiter of the selection criteria being used.\n* `max_depth` (Optional) The max depth of the selection criteria.\n* `min_storage_bytes_percentage` (Optional) The minimum number of storage bytes percentage whose metrics will be selected.\n\n### AWS Org\n\nThe `aws_org` block supports the following:\n\n* `arn` (Required) The Amazon Resource Name (ARN) of the Amazon Web Services organization.\n\n### Data Export\n\nThe `data_export` block supports the following:\n\n* `cloud_watch_metrics` (Optional) Amazon CloudWatch publishing for S3 Storage Lens metrics. See [Cloud Watch Metrics](#cloud-watch-metrics) below for more details.\n* `s3_bucket_destination` (Optional) The bucket where the S3 Storage Lens metrics export will be located. See [S3 Bucket Destination](#s3-bucket-destination) below for more details.\n\n### Cloud Watch Metrics\n\nThe `cloud_watch_metrics` block supports the following:\n\n* `enabled` (Required) Whether CloudWatch publishing for S3 Storage Lens metrics is enabled.\n\n### S3 Bucket Destination\n\nThe `s3_bucket_destination` block supports the following:\n\n* `account_id` (Required) The account ID of the owner of the S3 Storage Lens metrics export bucket.\n* `arn` (Required) The Amazon Resource Name (ARN) of the bucket.\n* `encryption` (Optional) Encryption of the metrics exports in this bucket. See [Encryption](#encryption) below for more details.\n* `format` (Required) The export format. Valid values: `CSV`, `Parquet`.\n* `output_schema_version` (Required) The schema version of the export file. Valid values: `V_1`.\n* `prefix` (Optional) The prefix of the destination bucket where the metrics export will be delivered.\n\n### Encryption\n\nThe `encryption` block supports the following:\n\n* `sse_kms` (Optional) SSE-KMS encryption. See [SSE KMS](#sse-kms) below for more details.\n* `sse_s3` (Optional) SSE-S3 encryption. An empty configuration block `{}` should be used.\n\n### SSE KMS\n\nThe `sse_kms` block supports the following:\n\n* `key_id` (Required) KMS key ARN.\n\n### Exclude\n\nThe `exclude` block supports the following:\n\n* `buckets` (Optional) List of S3 bucket ARNs.\n* `regions` (Optional) List of AWS Regions.\n\n### Include\n\nThe `include` block supports the following:\n\n* `buckets` (Optional) List of S3 bucket ARNs.\n* `regions` (Optional) List of AWS Regions.\n\n## Attribute Reference\n\nThis resource exports the following attributes in addition to the arguments above:\n\n* `arn` - Amazon Resource Name (ARN) of the S3 Storage Lens configuration.\n* `tags_all` - A map of tags assigned to the resource, including those inherited from the provider [`default_tags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block).\n\n## Import\n\nIn Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import S3 Storage Lens configurations using the `account_id` and `config_id`, separated by a colon (`:`). For example:\n\n```terraform\nimport {\n  to = aws_s3control_storage_lens_configuration.example\n  id = \"123456789012:example-1\"\n}\n```\n\nUsing `terraform import`, import S3 Storage Lens configurations using the `account_id` and `config_id`, separated by a colon (`:`). For example:\n\n```console\n% terraform import aws_s3control_storage_lens_configuration.example 123456789012:example-1\n```\n",
      "language": "hcl",
      "path": "website/docs/r/s3control_storage_lens_configuration.html.markdown",
      "slug": "s3control_storage_lens_configuration",
      "subcategory": "S3 Control",
      "title": "s3control_storage_lens_configuration",
      "truncated": false
    },
    "links": {
      "self": "/v2/provider-docs/3225809"
    }
  }
}