{
  "data": {
    "type": "provider-docs",
    "id": "3224835",
    "attributes": {
      "category": "resources",
      "content": "---\nsubcategory: \"Amplify\"\nlayout: \"aws\"\npage_title: \"AWS: aws_amplify_app\"\ndescription: |-\n  Provides an Amplify App resource.\n---\n\n# Resource: aws_amplify_app\n\nProvides an Amplify App resource, a fullstack serverless app hosted on the [AWS Amplify Console](https://docs.aws.amazon.com/amplify/latest/userguide/welcome.html).\n\n~> **Note:** When you create/update an Amplify App from Terraform, you may end up with the error \"BadRequestException: You should at least provide one valid token\" because of authentication issues. See the section \"Repository with Tokens\" below.\n\n## Example Usage\n\n```terraform\nresource \"aws_amplify_app\" \"example\" {\n  name       = \"example\"\n  repository = \"https://github.com/example/app\"\n\n  # The default build_spec added by the Amplify Console for React.\n  build_spec = <<-EOT\n    version: 0.1\n    frontend:\n      phases:\n        preBuild:\n          commands:\n            - yarn install\n        build:\n          commands:\n            - yarn run build\n      artifacts:\n        baseDirectory: build\n        files:\n          - '**/*'\n      cache:\n        paths:\n          - node_modules/**/*\n  EOT\n\n  # The default rewrites and redirects added by the Amplify Console.\n  custom_rule {\n    source = \"/<*>\"\n    status = \"404\"\n    target = \"/index.html\"\n  }\n\n  environment_variables = {\n    ENV = \"test\"\n  }\n}\n```\n\n### Repository with Tokens\n\nIf you create a new Amplify App with the `repository` argument, you also need to set `oauth_token` or `access_token` for authentication. For GitHub, get a [personal access token](https://help.github.com/en/github/authenticating-to-github/creating-a-personal-access-token-for-the-command-line) and set `access_token` as follows:\n\n```terraform\nresource \"aws_amplify_app\" \"example\" {\n  name       = \"example\"\n  repository = \"https://github.com/example/app\"\n\n  # GitHub personal access token\n  access_token = \"...\"\n}\n```\n\nYou can omit `access_token` if you import an existing Amplify App created by the Amplify Console (using OAuth for authentication).\n\n### Auto Branch Creation\n\n```terraform\nresource \"aws_amplify_app\" \"example\" {\n  name = \"example\"\n\n  enable_auto_branch_creation = true\n\n  # The default patterns added by the Amplify Console.\n  auto_branch_creation_patterns = [\n    \"*\",\n    \"*/**\",\n  ]\n\n  auto_branch_creation_config {\n    # Enable auto build for the created branch.\n    enable_auto_build = true\n  }\n}\n```\n\n### Basic Authorization\n\n```terraform\nresource \"aws_amplify_app\" \"example\" {\n  name = \"example\"\n\n  enable_basic_auth      = true\n  basic_auth_credentials = base64encode(\"username1:password1\")\n}\n```\n\n### Rewrites and Redirects\n\n```terraform\nresource \"aws_amplify_app\" \"example\" {\n  name = \"example\"\n\n  # Reverse Proxy Rewrite for API requests\n  # https://docs.aws.amazon.com/amplify/latest/userguide/redirects.html#reverse-proxy-rewrite\n  custom_rule {\n    source = \"/api/<*>\"\n    status = \"200\"\n    target = \"https://api.example.com/api/<*>\"\n  }\n\n  # Redirects for Single Page Web Apps (SPA)\n  # https://docs.aws.amazon.com/amplify/latest/userguide/redirects.html#redirects-for-single-page-web-apps-spa\n  custom_rule {\n    source = \"</^[^.]+$|\\\\.(?!(css|gif|ico|jpg|js|png|txt|svg|woff|ttf|map|json)$)([^.]+$)/>\"\n    status = \"200\"\n    target = \"/index.html\"\n  }\n}\n```\n\n### Custom Image\n\n```terraform\nresource \"aws_amplify_app\" \"example\" {\n  name = \"example\"\n\n  environment_variables = {\n    \"_CUSTOM_IMAGE\" = \"node:16\",\n  }\n}\n```\n\n## Argument Reference\n\nThis resource supports the following arguments:\n\n* `name` - (Required) Name for an Amplify app.\n* `access_token` - (Optional) Personal access token for a third-party source control system for an Amplify app. The personal access token is used to create a webhook and a read-only deploy key. The token is not stored.\n* `auto_branch_creation_config` - (Optional) Automated branch creation configuration for an Amplify app. An `auto_branch_creation_config` block is documented below.\n* `auto_branch_creation_patterns` - (Optional) Automated branch creation glob patterns for an Amplify app.\n* `basic_auth_credentials` - (Optional) Credentials for basic authorization for an Amplify app.\n* `build_spec` - (Optional) The [build specification](https://docs.aws.amazon.com/amplify/latest/userguide/build-settings.html) (build spec) for an Amplify app.\n* `custom_rule` - (Optional) Custom rewrite and redirect rules for an Amplify app. A `custom_rule` block is documented below.\n* `description` - (Optional) Description for an Amplify app.\n* `enable_auto_branch_creation` - (Optional) Enables automated branch creation for an Amplify app.\n* `enable_basic_auth` - (Optional) Enables basic authorization for an Amplify app. This will apply to all branches that are part of this app.\n* `enable_branch_auto_build` - (Optional) Enables auto-building of branches for the Amplify App.\n* `enable_branch_auto_deletion` - (Optional) Automatically disconnects a branch in the Amplify Console when you delete a branch from your Git repository.\n* `environment_variables` - (Optional) Environment variables map for an Amplify app.\n* `iam_service_role_arn` - (Optional) AWS Identity and Access Management (IAM) service role for an Amplify app.\n* `oauth_token` - (Optional) OAuth token for a third-party source control system for an Amplify app. The OAuth token is used to create a webhook and a read-only deploy key. The OAuth token is not stored.\n* `platform` - (Optional) Platform or framework for an Amplify app. Valid values: `WEB`, `WEB_COMPUTE`. Default value: `WEB`.\n* `repository` - (Optional) Repository for an Amplify app.\n* `tags` - (Optional) Key-value mapping of resource tags. If configured with a provider [`default_tags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block) present, tags with matching keys will overwrite those defined at the provider-level.\n\nAn `auto_branch_creation_config` block supports the following arguments:\n\n* `basic_auth_credentials` - (Optional) Basic authorization credentials for the autocreated branch.\n* `build_spec` - (Optional) Build specification (build spec) for the autocreated branch.\n* `enable_auto_build` - (Optional) Enables auto building for the autocreated branch.\n* `enable_basic_auth` - (Optional) Enables basic authorization for the autocreated branch.\n* `enable_performance_mode` - (Optional) Enables performance mode for the branch.\n* `enable_pull_request_preview` - (Optional) Enables pull request previews for the autocreated branch.\n* `environment_variables` - (Optional) Environment variables for the autocreated branch.\n* `framework` - (Optional) Framework for the autocreated branch.\n* `pull_request_environment_name` - (Optional) Amplify environment name for the pull request.\n* `stage` - (Optional) Describes the current stage for the autocreated branch. Valid values: `PRODUCTION`, `BETA`, `DEVELOPMENT`, `EXPERIMENTAL`, `PULL_REQUEST`.\n\nA `custom_rule` block supports the following arguments:\n\n* `condition` - (Optional) Condition for a URL rewrite or redirect rule, such as a country code.\n* `source` - (Required) Source pattern for a URL rewrite or redirect rule.\n* `status` - (Optional) Status code for a URL rewrite or redirect rule. Valid values: `200`, `301`, `302`, `404`, `404-200`.\n* `target` - (Required) Target pattern for a URL rewrite or redirect rule.\n\n## Attribute Reference\n\nThis resource exports the following attributes in addition to the arguments above:\n\n* `arn` - ARN of the Amplify app.\n* `default_domain` - Default domain for the Amplify app.\n* `id` - Unique ID of the Amplify app.\n* `production_branch` - Describes the information about a production branch for an Amplify app. A `production_branch` block is documented below.\n* `tags_all` - Map of tags assigned to the resource, including those inherited from the provider [`default_tags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block).\n\nA `production_branch` block supports the following attributes:\n\n* `branch_name` - Branch name for the production branch.\n* `last_deploy_time` - Last deploy time of the production branch.\n* `status` - Status of the production branch.\n* `thumbnail_url` - Thumbnail URL for the production branch.\n\n## Import\n\nIn Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import Amplify App using Amplify App ID (appId). For example:\n\n```terraform\nimport {\n  to = aws_amplify_app.example\n  id = \"d2ypk4k47z8u6\"\n}\n```\n\nUsing `terraform import`, import Amplify App using Amplify App ID (appId). For example:\n\n```console\n% terraform import aws_amplify_app.example d2ypk4k47z8u6\n```\n\nApp ID can be obtained from App ARN (e.g., `arn:aws:amplify:us-east-1:12345678:apps/d2ypk4k47z8u6`).\n",
      "language": "hcl",
      "path": "website/docs/r/amplify_app.html.markdown",
      "slug": "amplify_app",
      "subcategory": "Amplify",
      "title": "amplify_app",
      "truncated": false
    },
    "links": {
      "self": "/v2/provider-docs/3224835"
    }
  }
}