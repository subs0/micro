{
  "data": {
    "type": "provider-docs",
    "id": "3255860",
    "attributes": {
      "category": "resources",
      "content": "---\nsubcategory: \"SSM (Systems Manager)\"\nlayout: \"aws\"\npage_title: \"AWS: aws_ssm_patch_baseline\"\ndescription: |-\n  Provides an SSM Patch Baseline resource\n---\n\n# Resource: aws_ssm_patch_baseline\n\nProvides an SSM Patch Baseline resource.\n\n~> **NOTE on Patch Baselines:** The `approved_patches` and `approval_rule` are\nboth marked as optional fields, but the Patch Baseline requires that at least one\nof them is specified.\n\n## Example Usage\n\n### Basic Usage\n\nUsing `approved_patches` only.\n\n```terraform\nresource \"aws_ssm_patch_baseline\" \"production\" {\n  name             = \"patch-baseline\"\n  approved_patches = [\"KB123456\"]\n}\n```\n\n### Advanced Usage, specifying patch filters\n\n```terraform\nresource \"aws_ssm_patch_baseline\" \"production\" {\n  name             = \"patch-baseline\"\n  description      = \"Patch Baseline Description\"\n  approved_patches = [\"KB123456\", \"KB456789\"]\n  rejected_patches = [\"KB987654\"]\n\n  global_filter {\n    key    = \"PRODUCT\"\n    values = [\"WindowsServer2008\"]\n  }\n\n  global_filter {\n    key    = \"CLASSIFICATION\"\n    values = [\"ServicePacks\"]\n  }\n\n  global_filter {\n    key    = \"MSRC_SEVERITY\"\n    values = [\"Low\"]\n  }\n\n  approval_rule {\n    approve_after_days = 7\n    compliance_level   = \"HIGH\"\n\n    patch_filter {\n      key    = \"PRODUCT\"\n      values = [\"WindowsServer2016\"]\n    }\n\n    patch_filter {\n      key    = \"CLASSIFICATION\"\n      values = [\"CriticalUpdates\", \"SecurityUpdates\", \"Updates\"]\n    }\n\n    patch_filter {\n      key    = \"MSRC_SEVERITY\"\n      values = [\"Critical\", \"Important\", \"Moderate\"]\n    }\n  }\n\n  approval_rule {\n    approve_after_days = 7\n\n    patch_filter {\n      key    = \"PRODUCT\"\n      values = [\"WindowsServer2012\"]\n    }\n  }\n}\n```\n\n### Advanced usage, specifying Microsoft application and Windows patch rules\n\n```terraform\nresource \"aws_ssm_patch_baseline\" \"windows_os_apps\" {\n  name             = \"WindowsOSAndMicrosoftApps\"\n  description      = \"Patch both Windows and Microsoft apps\"\n  operating_system = \"WINDOWS\"\n\n  approval_rule {\n    approve_after_days = 7\n\n    patch_filter {\n      key    = \"CLASSIFICATION\"\n      values = [\"CriticalUpdates\", \"SecurityUpdates\"]\n    }\n\n    patch_filter {\n      key    = \"MSRC_SEVERITY\"\n      values = [\"Critical\", \"Important\"]\n    }\n  }\n\n  approval_rule {\n    approve_after_days = 7\n\n    patch_filter {\n      key    = \"PATCH_SET\"\n      values = [\"APPLICATION\"]\n    }\n\n    # Filter on Microsoft product if necessary\n    patch_filter {\n      key    = \"PRODUCT\"\n      values = [\"Office 2013\", \"Office 2016\"]\n    }\n  }\n}\n```\n\n### Advanced usage, specifying alternate patch source repository\n\n```terraform\nresource \"aws_ssm_patch_baseline\" \"al_2017_09\" {\n  name             = \"Amazon-Linux-2017.09\"\n  description      = \"My patch repository for Amazon Linux 2017.09\"\n  operating_system = \"AMAZON_LINUX\"\n\n  approval_rule {\n    # ...\n  }\n\n  source {\n    name          = \"My-AL2017.09\"\n    products      = [\"AmazonLinux2017.09\"]\n    configuration = <<EOF\n[amzn-main]\nname=amzn-main-Base\nmirrorlist=http://repo./$awsregion./$awsdomain//$releasever/main/mirror.list\nmirrorlist_expire=300\nmetadata_expire=300\npriority=10\nfailovermethod=priority\nfastestmirror_enabled=0\ngpgcheck=1\ngpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-amazon-ga\nenabled=1\nretries=3\ntimeout=5\nreport_instanceid=yes\nEOF\n  }\n}\n```\n\n## Argument Reference\n\nThis resource supports the following arguments:\n\n* `name` - (Required) The name of the patch baseline.\n* `description` - (Optional) The description of the patch baseline.\n* `operating_system` - (Optional) The operating system the patch baseline applies to.\n  Valid values are\n  `ALMA_LINUX`,\n  `AMAZON_LINUX`,\n  `AMAZON_LINUX_2`,\n  `AMAZON_LINUX_2022`,\n  `AMAZON_LINUX_2023`,\n  `CENTOS`,\n  `DEBIAN`,\n  `MACOS`,\n  `ORACLE_LINUX`,\n  `RASPBIAN`,\n  `REDHAT_ENTERPRISE_LINUX`,\n  `ROCKY_LINUX`,\n  `SUSE`,\n  `UBUNTU`, and\n  `WINDOWS`.\n  The default value is `WINDOWS`.\n* `approved_patches_compliance_level` - (Optional) The compliance level for approved patches.\n  This means that if an approved patch is reported as missing, this is the severity of the compliance violation.\n  Valid values are `CRITICAL`, `HIGH`, `MEDIUM`, `LOW`, `INFORMATIONAL`, `UNSPECIFIED`.\n  The default value is `UNSPECIFIED`.\n* `approved_patches` - (Optional) A list of explicitly approved patches for the baseline.\n  Cannot be specified with `approval_rule`.\n* `rejected_patches` - (Optional) A list of rejected patches.\n* `global_filter` - (Optional) A set of global filters used to exclude patches from the baseline.\n  Up to 4 global filters can be specified using Key/Value pairs.\n  Valid Keys are `PRODUCT`, `CLASSIFICATION`, `MSRC_SEVERITY`, and `PATCH_ID`.\n* `approval_rule` - (Optional) A set of rules used to include patches in the baseline.\n  Up to 10 approval rules can be specified.\n  See [`approval_rule`](#approval_rule-block) below.\n* `source` - (Optional) Configuration block with alternate sources for patches.\n  Applies to Linux instances only.\n  See [`source`](#source-block) below.\n* `rejected_patches_action` - (Optional) The action for Patch Manager to take on patches included in the `rejected_patches` list.\n  Valid values are `ALLOW_AS_DEPENDENCY` and `BLOCK`.\n* `approved_patches_enable_non_security` - (Optional) Indicates whether the list of approved patches includes non-security updates that should be applied to the instances.\n  Applies to Linux instances only.\n* `tags` - (Optional) A map of tags to assign to the resource. If configured with a provider [`default_tags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block) present, tags with matching keys will overwrite those defined at the provider-level.\n\n### `approval_rule` Block\n\nThe `approval_rule` block supports:\n\n* `approve_after_days` - (Optional) The number of days after the release date of each patch matched by the rule the patch is marked as approved in the patch baseline.\n  Valid Range: 0 to 100.\n  Conflicts with `approve_until_date`.\n* `approve_until_date` - (Optional) The cutoff date for auto approval of released patches.\n  Any patches released on or before this date are installed automatically.\n  Date is formatted as `YYYY-MM-DD`.\n  Conflicts with `approve_after_days`\n* `patch_filter` - (Required) The patch filter group that defines the criteria for the rule.\n  Up to 5 patch filters can be specified per approval rule using Key/Value pairs.\n  Valid combinations of these Keys and the `operating_system` value can be found in the [SSM DescribePatchProperties API Reference](https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_DescribePatchProperties.html).\n  Valid Values are exact values for the patch property given as the key, or a wildcard `*`, which matches all values.\n    * `PATCH_SET` defaults to `OS` if unspecified\n* `compliance_level` - (Optional) The compliance level for patches approved by this rule.\n  Valid values are `CRITICAL`, `HIGH`, `MEDIUM`, `LOW`, `INFORMATIONAL`, and `UNSPECIFIED`.\n  The default value is `UNSPECIFIED`.\n* `enable_non_security` - (Optional) Boolean enabling the application of non-security updates.\n  The default value is `false`.\n  Valid for Linux instances only.\n\n### `source` Block\n\nThe `source` block supports:\n\n* `name` - (Required) The name specified to identify the patch source.\n* `configuration` - (Required) The value of the yum repo configuration.\n  For information about other options available for your yum repository configuration, see the [`dnf.conf` documentation](https://man7.org/linux/man-pages/man5/dnf.conf.5.html)\n* `products` - (Required) The specific operating system versions a patch repository applies to, such as `\"Ubuntu16.04\"`, `\"AmazonLinux2016.09\"`, `\"RedhatEnterpriseLinux7.2\"` or `\"Suse12.7\"`.\n  For lists of supported product values, see [PatchFilter](https://docs.aws.amazon.com/systems-manager/latest/APIReference/API_PatchFilter.html).\n\n## Attribute Reference\n\nThis resource exports the following attributes in addition to the arguments above:\n\n* `id` - The ID of the patch baseline.\n* `arn` - The ARN of the patch baseline.\n* `tags_all` - A map of tags assigned to the resource, including those inherited from the provider [`default_tags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block).\n\n## Import\n\nIn Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import SSM Patch Baselines using their baseline ID. For example:\n\n```terraform\nimport {\n  to = aws_ssm_patch_baseline.example\n  id = \"pb-12345678\"\n}\n```\n\nUsing `terraform import`, import SSM Patch Baselines using their baseline ID. For example:\n\n```console\n% terraform import aws_ssm_patch_baseline.example pb-12345678\n```\n",
      "language": "hcl",
      "path": "website/docs/r/ssm_patch_baseline.html.markdown",
      "slug": "ssm_patch_baseline",
      "subcategory": "SSM (Systems Manager)",
      "title": "ssm_patch_baseline",
      "truncated": false
    },
    "links": {
      "self": "/v2/provider-docs/3255860"
    }
  }
}