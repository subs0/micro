{
  "data": {
    "type": "provider-docs",
    "id": "3255827",
    "attributes": {
      "category": "resources",
      "content": "---\nsubcategory: \"SFN (Step Functions)\"\nlayout: \"aws\"\npage_title: \"AWS: aws_sfn_state_machine\"\ndescription: |-\n  Provides a Step Function State Machine resource.\n---\n\n# Resource: aws_sfn_state_machine\n\nProvides a Step Function State Machine resource\n\n## Example Usage\n\n### Basic (Standard Workflow)\n\n```terraform\n# ...\n\nresource \"aws_sfn_state_machine\" \"sfn_state_machine\" {\n  name     = \"my-state-machine\"\n  role_arn = aws_iam_role.iam_for_sfn.arn\n\n  definition = <<EOF\n{\n  \"Comment\": \"A Hello World example of the Amazon States Language using an AWS Lambda Function\",\n  \"StartAt\": \"HelloWorld\",\n  \"States\": {\n    \"HelloWorld\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"${aws_lambda_function.lambda.arn}\",\n      \"End\": true\n    }\n  }\n}\nEOF\n}\n```\n\n### Basic (Express Workflow)\n\n```terraform\n# ...\n\nresource \"aws_sfn_state_machine\" \"sfn_state_machine\" {\n  name     = \"my-state-machine\"\n  role_arn = aws_iam_role.iam_for_sfn.arn\n  type     = \"EXPRESS\"\n\n  definition = <<EOF\n{\n  \"Comment\": \"A Hello World example of the Amazon States Language using an AWS Lambda Function\",\n  \"StartAt\": \"HelloWorld\",\n  \"States\": {\n    \"HelloWorld\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"${aws_lambda_function.lambda.arn}\",\n      \"End\": true\n    }\n  }\n}\nEOF\n}\n```\n\n### Publish (Publish SFN version)\n\n```terraform\n# ...\n\nresource \"aws_sfn_state_machine\" \"sfn_state_machine\" {\n  name     = \"my-state-machine\"\n  role_arn = aws_iam_role.iam_for_sfn.arn\n  publish  = true\n  type     = \"EXPRESS\"\n\n  definition = <<EOF\n{\n  \"Comment\": \"A Hello World example of the Amazon States Language using an AWS Lambda Function\",\n  \"StartAt\": \"HelloWorld\",\n  \"States\": {\n    \"HelloWorld\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"${aws_lambda_function.lambda.arn}\",\n      \"End\": true\n    }\n  }\n}\nEOF\n}\n```\n\n### Logging\n\n~> *NOTE:* See the [AWS Step Functions Developer Guide](https://docs.aws.amazon.com/step-functions/latest/dg/welcome.html) for more information about enabling Step Function logging.\n\n```terraform\n# ...\n\nresource \"aws_sfn_state_machine\" \"sfn_state_machine\" {\n  name     = \"my-state-machine\"\n  role_arn = aws_iam_role.iam_for_sfn.arn\n\n  definition = <<EOF\n{\n  \"Comment\": \"A Hello World example of the Amazon States Language using an AWS Lambda Function\",\n  \"StartAt\": \"HelloWorld\",\n  \"States\": {\n    \"HelloWorld\": {\n      \"Type\": \"Task\",\n      \"Resource\": \"${aws_lambda_function.lambda.arn}\",\n      \"End\": true\n    }\n  }\n}\nEOF\n\n  logging_configuration {\n    log_destination        = \"${aws_cloudwatch_log_group.log_group_for_sfn.arn}:*\"\n    include_execution_data = true\n    level                  = \"ERROR\"\n  }\n}\n```\n\n## Argument Reference\n\nThis resource supports the following arguments:\n\n* `definition` - (Required) The [Amazon States Language](https://docs.aws.amazon.com/step-functions/latest/dg/concepts-amazon-states-language.html) definition of the state machine.\n* `logging_configuration` - (Optional) Defines what execution history events are logged and where they are logged. The `logging_configuration` parameter is only valid when `type` is set to `EXPRESS`. Defaults to `OFF`. For more information see [Logging Express Workflows](https://docs.aws.amazon.com/step-functions/latest/dg/cw-logs.html) and [Log Levels](https://docs.aws.amazon.com/step-functions/latest/dg/cloudwatch-log-level.html) in the AWS Step Functions User Guide.\n* `name` - (Optional) The name of the state machine. The name should only contain `0`-`9`, `A`-`Z`, `a`-`z`, `-` and `_`. If omitted, Terraform will assign a random, unique name.\n* `name_prefix` - (Optional) Creates a unique name beginning with the specified prefix. Conflicts with `name`.\n* `publish` - (Optional) Set to true to publish a version of the state machine during creation. Default: false.\n* `role_arn` - (Required) The Amazon Resource Name (ARN) of the IAM role to use for this state machine.\n* `tags` - (Optional) Key-value map of resource tags. If configured with a provider [`default_tags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block) present, tags with matching keys will overwrite those defined at the provider-level.\n* `tracing_configuration` - (Optional) Selects whether AWS X-Ray tracing is enabled.\n* `type` - (Optional) Determines whether a Standard or Express state machine is created. The default is `STANDARD`. You cannot update the type of a state machine once it has been created. Valid values: `STANDARD`, `EXPRESS`.\n\n### `logging_configuration` Configuration Block\n\n* `include_execution_data` - (Optional) Determines whether execution data is included in your log. When set to `false`, data is excluded.\n* `level` - (Optional) Defines which category of execution history events are logged. Valid values: `ALL`, `ERROR`, `FATAL`, `OFF`\n* `log_destination` - (Optional) Amazon Resource Name (ARN) of a CloudWatch log group. Make sure the State Machine has the correct IAM policies for logging. The ARN must end with `:*`\n\n### `tracing_configuration` Configuration Block\n\n* `enabled` - (Optional) When set to `true`, AWS X-Ray tracing is enabled. Make sure the State Machine has the correct IAM policies for logging. See the [AWS Step Functions Developer Guide](https://docs.aws.amazon.com/step-functions/latest/dg/xray-iam.html) for details.\n\n## Attribute Reference\n\nThis resource exports the following attributes in addition to the arguments above:\n\n* `id` - The ARN of the state machine.\n* `arn` - The ARN of the state machine.\n* `creation_date` - The date the state machine was created.\n* `status` - The current status of the state machine. Either `ACTIVE` or `DELETING`.\n* `tags_all` - A map of tags assigned to the resource, including those inherited from the provider [`default_tags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block).\n\n## Timeouts\n\n[Configuration options](https://developer.hashicorp.com/terraform/language/resources/syntax#operation-timeouts):\n\n* `create` - (Default `5m`)\n* `update` - (Default `1m`)\n* `delete` - (Default `5m`)\n\n## Import\n\nIn Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import State Machines using the `arn`. For example:\n\n```terraform\nimport {\n  to = aws_sfn_state_machine.foo\n  id = \"arn:aws:states:eu-west-1:123456789098:stateMachine:bar\"\n}\n```\n\nUsing `terraform import`, import State Machines using the `arn`. For example:\n\n```console\n% terraform import aws_sfn_state_machine.foo arn:aws:states:eu-west-1:123456789098:stateMachine:bar\n```\n",
      "language": "hcl",
      "path": "website/docs/r/sfn_state_machine.html.markdown",
      "slug": "sfn_state_machine",
      "subcategory": "SFN (Step Functions)",
      "title": "sfn_state_machine",
      "truncated": false
    },
    "links": {
      "self": "/v2/provider-docs/3255827"
    }
  }
}