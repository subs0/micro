{
  "data": {
    "type": "provider-docs",
    "id": "3254790",
    "attributes": {
      "category": "resources",
      "content": "---\nsubcategory: \"API Gateway V2\"\nlayout: \"aws\"\npage_title: \"AWS: aws_apigatewayv2_stage\"\ndescription: |-\n  Manages an Amazon API Gateway Version 2 stage.\n---\n\n# Resource: aws_apigatewayv2_stage\n\nManages an Amazon API Gateway Version 2 stage.\nMore information can be found in the [Amazon API Gateway Developer Guide](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-websocket-api.html).\n\n## Example Usage\n\n### Basic\n\n```terraform\nresource \"aws_apigatewayv2_stage\" \"example\" {\n  api_id = aws_apigatewayv2_api.example.id\n  name   = \"example-stage\"\n}\n```\n\n## Argument Reference\n\nThe following arguments are required:\n\n* `api_id` - (Required) API identifier.\n* `name` - (Required) Name of the stage. Must be between 1 and 128 characters in length.\n\nThe following arguments are optional:\n\n* `access_log_settings` - (Optional) Settings for logging access in this stage.\nUse the [`aws_api_gateway_account`](/docs/providers/aws/r/api_gateway_account.html) resource to configure [permissions for CloudWatch Logging](https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-logging.html#set-up-access-logging-permissions).\n* `auto_deploy` - (Optional) Whether updates to an API automatically trigger a new deployment. Defaults to `false`. Applicable for HTTP APIs.\n* `client_certificate_id` - (Optional) Identifier of a client certificate for the stage. Use the [`aws_api_gateway_client_certificate`](/docs/providers/aws/r/api_gateway_client_certificate.html) resource to configure a client certificate.\nSupported only for WebSocket APIs.\n* `default_route_settings` - (Optional) Default route settings for the stage.\n* `deployment_id` - (Optional) Deployment identifier of the stage. Use the [`aws_apigatewayv2_deployment`](/docs/providers/aws/r/apigatewayv2_deployment.html) resource to configure a deployment.\n* `description` - (Optional) Description for the stage. Must be less than or equal to 1024 characters in length.\n* `route_settings` - (Optional) Route settings for the stage.\n* `stage_variables` - (Optional) Map that defines the stage variables for the stage.\n* `tags` - (Optional) Map of tags to assign to the stage. If configured with a provider [`default_tags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block) present, tags with matching keys will overwrite those defined at the provider-level.\n\n### access_log_settings\n\n* `destination_arn` - (Required) ARN of the CloudWatch Logs log group to receive access logs. Any trailing `:*` is trimmed from the ARN.\n* `format` - (Required) Single line [format](https://docs.aws.amazon.com/apigateway/latest/developerguide/set-up-logging.html#apigateway-cloudwatch-log-formats) of the access logs of data. Refer to log settings for [HTTP](https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-logging-variables.html) or [Websocket](https://docs.aws.amazon.com/apigateway/latest/developerguide/websocket-api-logging.html).\n\n### default_route_settings\n\n* `data_trace_enabled` - (Optional) Whether data trace logging is enabled for the default route. Affects the log entries pushed to Amazon CloudWatch Logs.\nDefaults to `false`. Supported only for WebSocket APIs.\n* `detailed_metrics_enabled` - (Optional) Whether detailed metrics are enabled for the default route. Defaults to `false`.\n* `logging_level` - (Optional) Logging level for the default route. Affects the log entries pushed to Amazon CloudWatch Logs.\nValid values: `ERROR`, `INFO`, `OFF`. Defaults to `OFF`. Supported only for WebSocket APIs. Terraform will only perform drift detection of its value when present in a configuration.\n* `throttling_burst_limit` - (Optional) Throttling burst limit for the default route.\n* `throttling_rate_limit` - (Optional) Throttling rate limit for the default route.\n\n### route_settings\n\n* `route_key` - (Required) Route key.\n* `data_trace_enabled` - (Optional) Whether data trace logging is enabled for the route. Affects the log entries pushed to Amazon CloudWatch Logs.\nDefaults to `false`. Supported only for WebSocket APIs.\n* `detailed_metrics_enabled` - (Optional) Whether detailed metrics are enabled for the route. Defaults to `false`.\n* `logging_level` - (Optional) Logging level for the route. Affects the log entries pushed to Amazon CloudWatch Logs.\nValid values: `ERROR`, `INFO`, `OFF`. Defaults to `OFF`. Supported only for WebSocket APIs. Terraform will only perform drift detection of its value when present in a configuration.\n* `throttling_burst_limit` - (Optional) Throttling burst limit for the route.\n* `throttling_rate_limit` - (Optional) Throttling rate limit for the route.\n\n## Attribute Reference\n\nThis resource exports the following attributes in addition to the arguments above:\n\n* `id` - Stage identifier.\n* `arn` - ARN of the stage.\n* `execution_arn` - ARN prefix to be used in an [`aws_lambda_permission`](/docs/providers/aws/r/lambda_permission.html)'s `source_arn` attribute.\nFor WebSocket APIs this attribute can additionally be used in an [`aws_iam_policy`](/docs/providers/aws/r/iam_policy.html) to authorize access to the [`@connections` API](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-how-to-call-websocket-api-connections.html).\nSee the [Amazon API Gateway Developer Guide](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-websocket-control-access-iam.html) for details.\n* `invoke_url` - URL to invoke the API pointing to the stage,\n  e.g., `wss://z4675bid1j.execute-api.eu-west-2.amazonaws.com/example-stage`, or `https://z4675bid1j.execute-api.eu-west-2.amazonaws.com/`\n* `tags_all` - Map of tags assigned to the resource, including those inherited from the provider [`default_tags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block).\n\n## Import\n\nIn Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import `aws_apigatewayv2_stage` using the API identifier and stage name. For example:\n\n```terraform\nimport {\n  to = aws_apigatewayv2_stage.example\n  id = \"aabbccddee/example-stage\"\n}\n```\n\nUsing `terraform import`, import `aws_apigatewayv2_stage` using the API identifier and stage name. For example:\n\n```console\n% terraform import aws_apigatewayv2_stage.example aabbccddee/example-stage\n```\n\n-> **Note:** The API Gateway managed stage created as part of [_quick_create_](https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-basic-concept.html#apigateway-definition-quick-create) cannot be imported.\n",
      "language": "hcl",
      "path": "website/docs/r/apigatewayv2_stage.html.markdown",
      "slug": "apigatewayv2_stage",
      "subcategory": "API Gateway V2",
      "title": "apigatewayv2_stage",
      "truncated": false
    },
    "links": {
      "self": "/v2/provider-docs/3254790"
    }
  }
}