{
  "data": {
    "type": "provider-docs",
    "id": "3254965",
    "attributes": {
      "category": "resources",
      "content": "---\nsubcategory: \"CodePipeline\"\nlayout: \"aws\"\npage_title: \"AWS: aws_codepipeline_webhook\"\ndescription: |-\n  Provides a CodePipeline Webhook\n---\n\n# Resource: aws_codepipeline_webhook\n\nProvides a CodePipeline Webhook.\n\n## Example Usage\n\n```terraform\nresource \"aws_codepipeline\" \"bar\" {\n  name     = \"tf-test-pipeline\"\n  role_arn = aws_iam_role.bar.arn\n\n  artifact_store {\n    location = aws_s3_bucket.bar.bucket\n    type     = \"S3\"\n\n    encryption_key {\n      id   = data.aws_kms_alias.s3kmskey.arn\n      type = \"KMS\"\n    }\n  }\n\n  stage {\n    name = \"Source\"\n\n    action {\n      name             = \"Source\"\n      category         = \"Source\"\n      owner            = \"ThirdParty\"\n      provider         = \"GitHub\"\n      version          = \"1\"\n      output_artifacts = [\"test\"]\n\n      configuration = {\n        Owner  = \"my-organization\"\n        Repo   = \"test\"\n        Branch = \"master\"\n      }\n    }\n  }\n\n  stage {\n    name = \"Build\"\n\n    action {\n      name            = \"Build\"\n      category        = \"Build\"\n      owner           = \"AWS\"\n      provider        = \"CodeBuild\"\n      input_artifacts = [\"test\"]\n      version         = \"1\"\n\n      configuration = {\n        ProjectName = \"test\"\n      }\n    }\n  }\n}\n\n# A shared secret between GitHub and AWS that allows AWS\n# CodePipeline to authenticate the request came from GitHub.\n# Would probably be better to pull this from the environment\n# or something like SSM Parameter Store.\nlocals {\n  webhook_secret = \"super-secret\"\n}\n\nresource \"aws_codepipeline_webhook\" \"bar\" {\n  name            = \"test-webhook-github-bar\"\n  authentication  = \"GITHUB_HMAC\"\n  target_action   = \"Source\"\n  target_pipeline = aws_codepipeline.bar.name\n\n  authentication_configuration {\n    secret_token = local.webhook_secret\n  }\n\n  filter {\n    json_path    = \"$.ref\"\n    match_equals = \"refs/heads/{Branch}\"\n  }\n}\n\n# Wire the CodePipeline webhook into a GitHub repository.\nresource \"github_repository_webhook\" \"bar\" {\n  repository = github_repository.repo.name\n\n  name = \"web\"\n\n  configuration {\n    url          = aws_codepipeline_webhook.bar.url\n    content_type = \"json\"\n    insecure_ssl = true\n    secret       = local.webhook_secret\n  }\n\n  events = [\"push\"]\n}\n```\n\n## Argument Reference\n\nThis resource supports the following arguments:\n\n* `name` - (Required) The name of the webhook.\n* `authentication` - (Required) The type of authentication  to use. One of `IP`, `GITHUB_HMAC`, or `UNAUTHENTICATED`.\n* `authentication_configuration` - (Optional) An `auth` block. Required for `IP` and `GITHUB_HMAC`. Auth blocks are documented below.\n* `filter` (Required) One or more `filter` blocks. Filter blocks are documented below.\n* `target_action` - (Required) The name of the action in a pipeline you want to connect to the webhook. The action must be from the source (first) stage of the pipeline.\n* `target_pipeline` - (Required) The name of the pipeline.\n* `tags` - (Optional) A map of tags to assign to the resource. If configured with a provider [`default_tags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block) present, tags with matching keys will overwrite those defined at the provider-level.\n\nAn `authentication_configuration` block supports the following arguments:\n\n* `secret_token` - (Optional) The shared secret for the GitHub repository webhook. Set this as `secret` in your `github_repository_webhook`'s `configuration` block. Required for `GITHUB_HMAC`.\n* `allowed_ip_range` - (Optional) A valid CIDR block for `IP` filtering. Required for `IP`.\n\nA `filter` block supports the following arguments:\n\n* `json_path` - (Required) The [JSON path](https://github.com/json-path/JsonPath) to filter on.\n* `match_equals` - (Required) The value to match on (e.g., `refs/heads/{Branch}`). See [AWS docs](https://docs.aws.amazon.com/codepipeline/latest/APIReference/API_WebhookFilterRule.html) for details.\n\n## Attribute Reference\n\nThis resource exports the following attributes in addition to the arguments above:\n\n* `arn` - The CodePipeline webhook's ARN.\n* `id` - The CodePipeline webhook's ARN.\n* `tags_all` - A map of tags assigned to the resource, including those inherited from the provider [`default_tags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block).\n* `url` - The CodePipeline webhook's URL. POST events to this endpoint to trigger the target.\n\n## Import\n\nIn Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import CodePipeline Webhooks using their ARN. For example:\n\n```terraform\nimport {\n  to = aws_codepipeline_webhook.example\n  id = \"arn:aws:codepipeline:us-west-2:123456789012:webhook:example\"\n}\n```\n\nUsing `terraform import`, import CodePipeline Webhooks using their ARN. For example:\n\n```console\n% terraform import aws_codepipeline_webhook.example arn:aws:codepipeline:us-west-2:123456789012:webhook:example\n```\n",
      "language": "hcl",
      "path": "website/docs/r/codepipeline_webhook.html.markdown",
      "slug": "codepipeline_webhook",
      "subcategory": "CodePipeline",
      "title": "codepipeline_webhook",
      "truncated": false
    },
    "links": {
      "self": "/v2/provider-docs/3254965"
    }
  }
}