{
  "data": {
    "type": "provider-docs",
    "id": "3254902",
    "attributes": {
      "category": "resources",
      "content": "---\nsubcategory: \"CloudFront\"\nlayout: \"aws\"\npage_title: \"AWS: aws_cloudfront_continuous_deployment_policy\"\ndescription: |-\n  Terraform resource for managing an AWS CloudFront Continuous Deployment Policy.\n---\n# Resource: aws_cloudfront_continuous_deployment_policy\n\nTerraform resource for managing an AWS CloudFront Continuous Deployment Policy.\n\n## Example Usage\n\n### Basic Usage\n\n```terraform\nresource \"aws_cloudfront_distribution\" \"staging\" {\n  enabled = true\n  staging = true\n\n  # ... other configuration ...\n}\n\nresource \"aws_cloudfront_continuous_deployment_policy\" \"example\" {\n  enabled = true\n\n  staging_distribution_dns_names {\n    items    = [aws_cloudfront_distribution.staging.domain_name]\n    quantity = 1\n  }\n\n  traffic_config {\n    type = \"SingleWeight\"\n    single_weight_config {\n      weight = \"0.01\"\n    }\n  }\n}\n\nresource \"aws_cloudfront_distribution\" \"production\" {\n  enabled = true\n\n  # NOTE: A continuous deployment policy cannot be associated to distribution\n  # on creation. Set this argument once the resource exists.\n  continuous_deployment_policy_id = aws_cloudfront_continuous_deployment_policy.example.id\n\n  # ... other configuration ...\n}\n```\n\n### Single Weight Config with Session Stickiness\n\n```terraform\nresource \"aws_cloudfront_continuous_deployment_policy\" \"example\" {\n  enabled = true\n\n  staging_distribution_dns_names {\n    items    = [aws_cloudfront_distribution.staging.domain_name]\n    quantity = 1\n  }\n\n  traffic_config {\n    type = \"SingleWeight\"\n    single_weight_config {\n      weight = \"0.01\"\n      session_stickiness_config {\n        idle_ttl    = 300\n        maximum_ttl = 600\n      }\n    }\n  }\n}\n```\n\n### Single Header Config\n\n```terraform\nresource \"aws_cloudfront_continuous_deployment_policy\" \"example\" {\n  enabled = true\n\n  staging_distribution_dns_names {\n    items    = [aws_cloudfront_distribution.staging.domain_name]\n    quantity = 1\n  }\n\n  traffic_config {\n    type = \"SingleHeader\"\n    single_header_config {\n      header = \"aws-cf-cd-example\"\n      value  = \"example\"\n    }\n  }\n}\n```\n\n## Argument Reference\n\nThe following arguments are required:\n\n* `enabled` - (Required) Whether this continuous deployment policy is enabled.\n* `staging_distribution_dns_names` - (Required) CloudFront domain name of the staging distribution. See [`staging_distribution_dns_names`](#staging_distribution_dns_names).\n* `traffic_config` - (Required) Parameters for routing production traffic from primary to staging distributions. See [`traffic_config`](#traffic_config).\n\n### `staging_distribution_dns_names`\n\n* `items` - (Required) A list of CloudFront domain names for the staging distribution.\n* `quantity` - (Required) Number of CloudFront domain names in the staging distribution.\n\n### `traffic_config`\n\n* `type` - (Required) Type of traffic configuration. Valid values are `SingleWeight` and `SingleHeader`.\n* `single_header_config` - (Optional) Determines which HTTP requests are sent to the staging distribution. See [`single_header_config`](#single_header_config).\n* `single_weight_config` - (Optional) Contains the percentage of traffic to send to the staging distribution. See [`single_weight_config`](#single_weight_config).\n\n### `single_header_config`\n\n* `header` - (Required) Request header name to send to the staging distribution. The header must contain the prefix `aws-cf-cd-`.\n* `value` - (Required) Request header value.\n\n### `single_weight_config`\n\n* `weight` - (Required) The percentage of traffic to send to a staging distribution, expressed as a decimal number between `0` and `.15`.\n* `session_stickiness_config` - (Optional) Session stickiness provides the ability to define multiple requests from a single viewer as a single session. This prevents the potentially inconsistent experience of sending some of a given user's requests to the staging distribution, while others are sent to the primary distribution. Define the session duration using TTL values. See [`session_stickiness_config`](#session_stickiness_config).\n\n### `session_stickiness_config`\n\n* `idle_ttl` - (Required) The amount of time in seconds after which sessions will cease if no requests are received. Valid values are `300` – `3600` (5–60 minutes). The value must be less than or equal to `maximum_ttl`.\n* `maximum_ttl` - (Required) The maximum amount of time in seconds to consider requests from the viewer as being part of the same session. Valid values are `300` – `3600` (5–60 minutes). The value must be greater than or equal to `idle_ttl`.\n\n## Attribute Reference\n\nThis resource exports the following attributes in addition to the arguments above:\n\n* `etag` - Current version of the continuous distribution policy.\n* `id` - Identifier of the continuous deployment policy.\n* `last_modified_time` - Date and time the continuous deployment policy was last modified.\n\n## Import\n\nIn Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import CloudFront Continuous Deployment Policy using the `id`. For example:\n\n```terraform\nimport {\n  to = aws_cloudfront_continuous_deployment_policy.example\n  id = \"abcd-1234\"\n}\n```\n\nUsing `terraform import`, import CloudFront Continuous Deployment Policy using the `id`. For example:\n\n```console\n% terraform import aws_cloudfront_continuous_deployment_policy.example abcd-1234 \n```\n",
      "language": "hcl",
      "path": "website/docs/r/cloudfront_continuous_deployment_policy.html.markdown",
      "slug": "cloudfront_continuous_deployment_policy",
      "subcategory": "CloudFront",
      "title": "cloudfront_continuous_deployment_policy",
      "truncated": false
    },
    "links": {
      "self": "/v2/provider-docs/3254902"
    }
  }
}