{
  "data": {
    "type": "provider-docs",
    "id": "3199102",
    "attributes": {
      "category": "resources",
      "content": "---\nsubcategory: \"VPC Lattice\"\nlayout: \"aws\"\npage_title: \"AWS: aws_vpclattice_listener\"\ndescription: |-\n  Terraform resource for managing an AWS VPC Lattice Listener.\n---\n\n# Resource: aws_vpclattice_listener\n\nTerraform resource for managing an AWS VPC Lattice Listener.\n\n## Example Usage\n\n### Fixed response action\n\n```\nresource \"aws_vpclattice_service\" \"test\" {\n  name = %[1]q\n}\n\nresource \"aws_vpclattice_listener\" \"test\" {\n  name               = %[1]q\n  protocol           = \"HTTPS\"\n  service_identifier = aws_vpclattice_service.test.id\n  default_action {\n    fixed_response {\n      status_code = 404\n    }\n  }\n}\n```\n\n### Forward action\n\n```\nresource \"aws_vpclattice_service\" \"test\" {\n  name = \"example\"\n}\n\nresource \"aws_vpclattice_target_group\" \"example\" {\n  name = \"example-target-group-1\"\n  type = \"INSTANCE\"\n\n  config {\n    port           = 80\n    protocol       = \"HTTP\"\n    vpc_identifier = aws_vpc.test.id\n  }\n}\n\nresource \"aws_vpclattice_listener\" \"example\" {\n  name               = \"example\"\n  protocol           = \"HTTP\"\n  service_identifier = aws_vpclattice_service.example.id\n  default_action {\n    forward {\n      target_groups {\n        target_group_identifier = aws_vpclattice_target_group.example.id\n      }\n    }\n  }\n}\n```\n\n### Forward action with weighted target groups\n\n```\nresource \"aws_vpclattice_service\" \"test\" {\n  name = \"example\"\n}\n\nresource \"aws_vpclattice_target_group\" \"example1\" {\n  name = \"example-target-group-1\"\n  type = \"INSTANCE\"\n\n  config {\n    port           = 80\n    protocol       = \"HTTP\"\n    vpc_identifier = aws_vpc.test.id\n  }\n}\n\nresource \"aws_vpclattice_target_group\" \"example2\" {\n  name = \"example-target-group-2\"\n  type = \"INSTANCE\"\n\n  config {\n    port           = 8080\n    protocol       = \"HTTP\"\n    vpc_identifier = aws_vpc.test.id\n  }\n}\n\nresource \"aws_vpclattice_listener\" \"example\" {\n  name               = \"example\"\n  protocol           = \"HTTP\"\n  service_identifier = aws_vpclattice_service.example.id\n  default_action {\n    forward {\n      target_groups {\n        target_group_identifier = aws_vpclattice_target_group.example1.id\n        weight                  = 80\n      }\n      target_groups {\n        target_group_identifier = aws_vpclattice_target_group.example2.id\n        weight                  = 20\n      }\n    }\n  }\n}\n```\n\n## Argument Reference\n\nThis resource supports the following arguments:\n\n* `default_action` - (Required) Default action block for the default listener rule. Default action blocks are defined below.\n* `name` - (Required, Forces new resource) Name of the listener. A listener name must be unique within a service. Valid characters are a-z, 0-9, and hyphens (-). You can't use a hyphen as the first or last character, or immediately after another hyphen.\n* `port` - (Optional, Forces new resource) Listener port. You can specify a value from 1 to 65535. If `port` is not specified and `protocol` is HTTP, the value will default to 80. If `port` is not specified and `protocol` is HTTPS, the value will default to 443.\n* `protocol` - (Required, Forces new resource) Protocol for the listener. Supported values are `HTTP` or `HTTPS`\n* `service_arn` - (Optional) Amazon Resource Name (ARN) of the VPC Lattice service. You must include either the `service_arn` or `service_identifier` arguments.\n* `service_identifier` - (Optional) ID of the VPC Lattice service. You must include either the `service_arn` or `service_identifier` arguments.\n-> **NOTE:** You must specify one of the following arguments: `service_arn` or `service_identifier`.\n* `tags` - (Optional) A map of tags to assign to the resource. If configured with a provider [`default_tags` configuration block](/docs/providers/aws/index.html#default_tags-configuration-block) present, tags with matching keys will overwrite those defined at the provider-level.\n\n### Default Action\n\nDefault action blocks (for `default_action`) must include at least one of the following argument blocks:\n\n* `fixed-response` - (Optional) Configuration block for returning a fixed response. See Fixed Response blocks below.\n* `forward` - (Optional) Route requests to one or more target groups. See Forward blocks below.\n\n-> **NOTE:** You must specify exactly one of the following argument blocks: `fixed_response` or `forward`.\n\n### Fixed Response\n\nFixed response blocks (for `fixed-response`) must include the following argument:\n\n* `status_code` - (Required) Custom HTTP status code to return, e.g. a 404 response code. See [Listeners](https://docs.aws.amazon.com/vpc-lattice/latest/ug/listeners.html) in the AWS documentation for a list of supported codes.\n\n### Forward\n\nForward blocks (for `forward`) must include the following arguments:\n\n* `target_groups` - (Required) One or more target group blocks.\n\n### Target Groups\n\nTarget group blocks (for `target_group`) must include the following arguments:\n\n* `target_group_identifier` - (Required) ID or Amazon Resource Name (ARN) of the target group.\n* `weight` - (Optional) Determines how requests are distributed to the target group. Only required if you specify multiple target groups for a forward action. For example, if you specify two target groups, one with a\nweight of 10 and the other with a weight of 20, the target group with a weight of 20 receives twice as many requests as the other target group. See [Listener rules](https://docs.aws.amazon.com/vpc-lattice/latest/ug/listeners.html#listener-rules) in the AWS documentation for additional examples. Default: `100`.\n\n## Attribute Reference\n\nThis resource exports the following attributes in addition to the arguments above:\n\n* `arn` - ARN of the listener.\n* `created_at` - Date and time that the listener was created, specified in ISO-8601 format.\n* `listener_id` - Standalone ID of the listener, e.g. `listener-0a1b2c3d4e5f6g`.\n* `updated_at` - Date and time that the listener was last updated, specified in ISO-8601 format.\n\n## Import\n\nIn Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import VPC Lattice Listener using the `listener_id` of the listener and the `id` of the VPC Lattice service combined with a `/` character. For example:\n\n```terraform\nimport {\n  to = aws_vpclattice_listener.example\n  id = \"svc-1a2b3c4d/listener-987654321\"\n}\n```\n\nUsing `terraform import`, import VPC Lattice Listener using the `listener_id` of the listener and the `id` of the VPC Lattice service combined with a `/` character. For example:\n\n```console\n% terraform import aws_vpclattice_listener.example svc-1a2b3c4d/listener-987654321\n```\n",
      "language": "hcl",
      "path": "website/docs/r/vpclattice_listener.html.markdown",
      "slug": "vpclattice_listener",
      "subcategory": "VPC Lattice",
      "title": "vpclattice_listener",
      "truncated": false
    },
    "links": {
      "self": "/v2/provider-docs/3199102"
    }
  }
}