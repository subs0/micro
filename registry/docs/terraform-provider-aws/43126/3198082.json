{
  "data": {
    "type": "provider-docs",
    "id": "3198082",
    "attributes": {
      "category": "resources",
      "content": "---\nsubcategory: \"CloudHSM\"\nlayout: \"aws\"\npage_title: \"AWS: aws_cloudhsm_v2_cluster\"\ndescription: |-\n  Provides a CloudHSM v2 resource.\n---\n\n# Resource: aws_cloudhsm_v2_cluster\n\nCreates an Amazon CloudHSM v2 cluster.\n\nFor information about CloudHSM v2, see the\n[AWS CloudHSM User Guide][1] and the [Amazon\nCloudHSM API Reference][2].\n\n~> **NOTE:** A CloudHSM Cluster can take several minutes to set up.\nPractically no single attribute can be updated, except for `tags`.\nIf you need to delete a cluster, you have to remove its HSM modules first.\nTo initialize cluster, you have to add an HSM instance to the cluster, then sign CSR and upload it.\n\n## Example Usage\n\nThe following example below creates a CloudHSM cluster.\n\n```terraform\nprovider \"aws\" {\n  region = var.aws_region\n}\n\ndata \"aws_availability_zones\" \"available\" {}\n\nresource \"aws_vpc\" \"cloudhsm_v2_vpc\" {\n  cidr_block = \"10.0.0.0/16\"\n\n  tags = {\n    Name = \"example-aws_cloudhsm_v2_cluster\"\n  }\n}\n\nresource \"aws_subnet\" \"cloudhsm_v2_subnets\" {\n  count                   = 2\n  vpc_id                  = aws_vpc.cloudhsm_v2_vpc.id\n  cidr_block              = element(var.subnets, count.index)\n  map_public_ip_on_launch = false\n  availability_zone       = element(data.aws_availability_zones.available.names, count.index)\n\n  tags = {\n    Name = \"example-aws_cloudhsm_v2_cluster\"\n  }\n}\n\nresource \"aws_cloudhsm_v2_cluster\" \"cloudhsm_v2_cluster\" {\n  hsm_type   = \"hsm1.medium\"\n  subnet_ids = aws_subnet.cloudhsm_v2_subnets[*].id\n\n  tags = {\n    Name = \"example-aws_cloudhsm_v2_cluster\"\n  }\n}\n```\n\n## Argument Reference\n\nThis resource supports the following arguments:\n\n* `source_backup_identifier` - (Optional) ID of Cloud HSM v2 cluster backup to be restored.\n* `hsm_type` - (Required) The type of HSM module in the cluster. Currently, only `hsm1.medium` is supported.\n* `subnet_ids` - (Required) The IDs of subnets in which cluster will operate.\n* `tags` - (Optional) A map of tags to assign to the resource. If configured with a provider [`default_tags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block) present, tags with matching keys will overwrite those defined at the provider-level.\n\n## Attribute Reference\n\nThis resource exports the following attributes in addition to the arguments above:\n\n* `cluster_id` - The id of the CloudHSM cluster.\n* `cluster_state` - The state of the CloudHSM cluster.\n* `vpc_id` - The id of the VPC that the CloudHSM cluster resides in.\n* `security_group_id` - The ID of the security group associated with the CloudHSM cluster.\n* `cluster_certificates` - The list of cluster certificates.\n    * `cluster_certificates.0.cluster_certificate` - The cluster certificate issued (signed) by the issuing certificate authority (CA) of the cluster's owner.\n    * `cluster_certificates.0.cluster_csr` - The certificate signing request (CSR). Available only in `UNINITIALIZED` state after an HSM instance is added to the cluster.\n    * `cluster_certificates.0.aws_hardware_certificate` - The HSM hardware certificate issued (signed) by AWS CloudHSM.\n    * `cluster_certificates.0.hsm_certificate` - The HSM certificate issued (signed) by the HSM hardware.\n    * `cluster_certificates.0.manufacturer_hardware_certificate` - The HSM hardware certificate issued (signed) by the hardware manufacturer.\n* `tags_all` - A map of tags assigned to the resource, including those inherited from the provider [`default_tags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block).\n\n[1]: https://docs.aws.amazon.com/cloudhsm/latest/userguide/introduction.html\n[2]: https://docs.aws.amazon.com/cloudhsm/latest/APIReference/Welcome.html\n\n## Import\n\nIn Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import CloudHSM v2 Clusters using the cluster `id`. For example:\n\n```terraform\nimport {\n  to = aws_cloudhsm_v2_cluster.test_cluster\n  id = \"cluster-aeb282a201\"\n}\n```\n\nUsing `terraform import`, import CloudHSM v2 Clusters using the cluster `id`. For example:\n\n```console\n% terraform import aws_cloudhsm_v2_cluster.test_cluster cluster-aeb282a201\n```\n",
      "language": "hcl",
      "path": "website/docs/r/cloudhsm_v2_cluster.html.markdown",
      "slug": "cloudhsm_v2_cluster",
      "subcategory": "CloudHSM",
      "title": "cloudhsm_v2_cluster",
      "truncated": false
    },
    "links": {
      "self": "/v2/provider-docs/3198082"
    }
  }
}