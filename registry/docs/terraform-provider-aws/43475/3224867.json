{
  "data": {
    "type": "provider-docs",
    "id": "3224867",
    "attributes": {
      "category": "resources",
      "content": "---\nsubcategory: \"API Gateway V2\"\nlayout: \"aws\"\npage_title: \"AWS: aws_apigatewayv2_deployment\"\ndescription: |-\n  Manages an Amazon API Gateway Version 2 deployment.\n---\n\n# Resource: aws_apigatewayv2_deployment\n\nManages an Amazon API Gateway Version 2 deployment.\nMore information can be found in the [Amazon API Gateway Developer Guide](https://docs.aws.amazon.com/apigateway/latest/developerguide/apigateway-websocket-api.html).\n\n-> **Note:** Creating a deployment for an API requires at least one `aws_apigatewayv2_route` resource associated with that API. To avoid race conditions when all resources are being created together, you need to add implicit resource references via the `triggers` argument or explicit resource references using the [resource `depends_on` meta-argument](https://www.terraform.io/docs/configuration/meta-arguments/depends_on.html).\n\n-> Enable the [resource `lifecycle` configuration block `create_before_destroy` argument](https://www.terraform.io/language/meta-arguments/lifecycle#create_before_destroy) in this resource configuration to properly order redeployments in Terraform.\n\n## Example Usage\n\n### Basic\n\n```terraform\nresource \"aws_apigatewayv2_deployment\" \"example\" {\n  api_id      = aws_apigatewayv2_api.example.id\n  description = \"Example deployment\"\n\n  lifecycle {\n    create_before_destroy = true\n  }\n}\n```\n\n### Redeployment Triggers\n\n-> **NOTE:** This is an optional and Terraform 0.12 (or later) advanced configuration that shows calculating a hash of the API's Terraform resources to determine changes that should trigger a new deployment. This value will change after the first Terraform apply of new resources, triggering an immediate redeployment, however it will stabilize afterwards except for resource changes. The `triggers` map can also be configured in other, more complex ways to fit the environment, avoiding the immediate redeployment issue.\n\n```terraform\nresource \"aws_apigatewayv2_deployment\" \"example\" {\n  api_id      = aws_apigatewayv2_api.example.id\n  description = \"Example deployment\"\n\n  triggers = {\n    redeployment = sha1(join(\",\", tolist([\n      jsonencode(aws_apigatewayv2_integration.example),\n      jsonencode(aws_apigatewayv2_route.example),\n    ])))\n  }\n\n  lifecycle {\n    create_before_destroy = true\n  }\n}\n```\n\n## Argument Reference\n\nThis resource supports the following arguments:\n\n* `api_id` - (Required) API identifier.\n* `description` - (Optional) Description for the deployment resource. Must be less than or equal to 1024 characters in length.\n* `triggers` - (Optional) Map of arbitrary keys and values that, when changed, will trigger a redeployment. To force a redeployment without changing these keys/values, use the [`terraform taint` command](https://www.terraform.io/docs/commands/taint.html).\n\n## Attribute Reference\n\nThis resource exports the following attributes in addition to the arguments above:\n\n* `id` - Deployment identifier.\n* `auto_deployed` - Whether the deployment was automatically released.\n\n## Import\n\nIn Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import `aws_apigatewayv2_deployment` using the API identifier and deployment identifier. For example:\n\n```terraform\nimport {\n  to = aws_apigatewayv2_deployment.example\n  id = \"aabbccddee/1122334\"\n}\n```\n\nUsing `terraform import`, import `aws_apigatewayv2_deployment` using the API identifier and deployment identifier. For example:\n\n```console\n% terraform import aws_apigatewayv2_deployment.example aabbccddee/1122334\n```\n\nThe `triggers` argument cannot be imported.\n",
      "language": "hcl",
      "path": "website/docs/r/apigatewayv2_deployment.html.markdown",
      "slug": "apigatewayv2_deployment",
      "subcategory": "API Gateway V2",
      "title": "apigatewayv2_deployment",
      "truncated": false
    },
    "links": {
      "self": "/v2/provider-docs/3224867"
    }
  }
}