{
  "data": {
    "type": "provider-docs",
    "id": "3224848",
    "attributes": {
      "category": "resources",
      "content": "---\nsubcategory: \"API Gateway\"\nlayout: \"aws\"\npage_title: \"AWS: aws_api_gateway_domain_name\"\ndescription: |-\n  Registers a custom domain name for use with AWS API Gateway.\n---\n\n# Resource: aws_api_gateway_domain_name\n\nRegisters a custom domain name for use with AWS API Gateway. Additional information about this functionality\ncan be found in the [API Gateway Developer Guide](https://docs.aws.amazon.com/apigateway/latest/developerguide/how-to-custom-domains.html).\n\nThis resource just establishes ownership of and the TLS settings for\na particular domain name. An API can be attached to a particular path\nunder the registered domain name using\n[the `aws_api_gateway_base_path_mapping` resource](api_gateway_base_path_mapping.html).\n\nAPI Gateway domains can be defined as either 'edge-optimized' or 'regional'.  In an edge-optimized configuration,\nAPI Gateway internally creates and manages a CloudFront distribution to route requests on the given hostname. In\naddition to this resource it's necessary to create a DNS record corresponding to the given domain name which is an alias\n(either Route53 alias or traditional CNAME) to the Cloudfront domain name exported in the `cloudfront_domain_name`\nattribute.\n\nIn a regional configuration, API Gateway does not create a CloudFront distribution to route requests to the API, though\na distribution can be created if needed. In either case, it is necessary to create a DNS record corresponding to the\ngiven domain name which is an alias (either Route53 alias or traditional CNAME) to the regional domain name exported in\nthe `regional_domain_name` attribute.\n\n~> **Note:** API Gateway requires the use of AWS Certificate Manager (ACM) certificates instead of Identity and Access Management (IAM) certificates in regions that support ACM. Regions that support ACM can be found in the [Regions and Endpoints Documentation](https://docs.aws.amazon.com/general/latest/gr/rande.html#acm_region). To import an existing private key and certificate into ACM or request an ACM certificate, see the [`aws_acm_certificate` resource](/docs/providers/aws/r/acm_certificate.html).\n\n~> **Note:** The `aws_api_gateway_domain_name` resource expects dependency on the `aws_acm_certificate_validation` as\nonly verified certificates can be used. This can be made either explicitly by adding the\n`depends_on = [aws_acm_certificate_validation.cert]` attribute. Or implicitly by referring certificate ARN\nfrom the validation resource where it will be available after the resource creation:\n`regional_certificate_arn = aws_acm_certificate_validation.cert.certificate_arn`.\n\n~> **Note:** All arguments including the private key will be stored in the raw state as plain-text.\n[Read more about sensitive data in state](https://www.terraform.io/docs/state/sensitive-data.html).\n\n## Example Usage\n\nAn end-to-end example of a REST API configured with OpenAPI can be found in the [`/examples/api-gateway-rest-api-openapi` directory within the GitHub repository](https://github.com/hashicorp/terraform-provider-aws/tree/main/examples/api-gateway-rest-api-openapi).\n\n### Edge Optimized (ACM Certificate)\n\n```terraform\nresource \"aws_api_gateway_domain_name\" \"example\" {\n  certificate_arn = aws_acm_certificate_validation.example.certificate_arn\n  domain_name     = \"api.example.com\"\n}\n\n# Example DNS record using Route53.\n# Route53 is not specifically required; any DNS host can be used.\nresource \"aws_route53_record\" \"example\" {\n  name    = aws_api_gateway_domain_name.example.domain_name\n  type    = \"A\"\n  zone_id = aws_route53_zone.example.id\n\n  alias {\n    evaluate_target_health = true\n    name                   = aws_api_gateway_domain_name.example.cloudfront_domain_name\n    zone_id                = aws_api_gateway_domain_name.example.cloudfront_zone_id\n  }\n}\n```\n\n### Edge Optimized (IAM Certificate)\n\n```terraform\nresource \"aws_api_gateway_domain_name\" \"example\" {\n  domain_name = \"api.example.com\"\n\n  certificate_name        = \"example-api\"\n  certificate_body        = file(\"${path.module}/example.com/example.crt\")\n  certificate_chain       = file(\"${path.module}/example.com/ca.crt\")\n  certificate_private_key = file(\"${path.module}/example.com/example.key\")\n}\n\n# Example DNS record using Route53.\n# Route53 is not specifically required; any DNS host can be used.\nresource \"aws_route53_record\" \"example\" {\n  zone_id = aws_route53_zone.example.id # See aws_route53_zone for how to create this\n\n  name = aws_api_gateway_domain_name.example.domain_name\n  type = \"A\"\n\n  alias {\n    name                   = aws_api_gateway_domain_name.example.cloudfront_domain_name\n    zone_id                = aws_api_gateway_domain_name.example.cloudfront_zone_id\n    evaluate_target_health = true\n  }\n}\n```\n\n### Regional (ACM Certificate)\n\n```terraform\nresource \"aws_api_gateway_domain_name\" \"example\" {\n  domain_name              = \"api.example.com\"\n  regional_certificate_arn = aws_acm_certificate_validation.example.certificate_arn\n\n  endpoint_configuration {\n    types = [\"REGIONAL\"]\n  }\n}\n\n# Example DNS record using Route53.\n# Route53 is not specifically required; any DNS host can be used.\nresource \"aws_route53_record\" \"example\" {\n  name    = aws_api_gateway_domain_name.example.domain_name\n  type    = \"A\"\n  zone_id = aws_route53_zone.example.id\n\n  alias {\n    evaluate_target_health = true\n    name                   = aws_api_gateway_domain_name.example.regional_domain_name\n    zone_id                = aws_api_gateway_domain_name.example.regional_zone_id\n  }\n}\n```\n\n### Regional (IAM Certificate)\n\n```terraform\nresource \"aws_api_gateway_domain_name\" \"example\" {\n  certificate_body          = file(\"${path.module}/example.com/example.crt\")\n  certificate_chain         = file(\"${path.module}/example.com/ca.crt\")\n  certificate_private_key   = file(\"${path.module}/example.com/example.key\")\n  domain_name               = \"api.example.com\"\n  regional_certificate_name = \"example-api\"\n\n  endpoint_configuration {\n    types = [\"REGIONAL\"]\n  }\n}\n\n# Example DNS record using Route53.\n# Route53 is not specifically required; any DNS host can be used.\nresource \"aws_route53_record\" \"example\" {\n  name    = aws_api_gateway_domain_name.example.domain_name\n  type    = \"A\"\n  zone_id = aws_route53_zone.example.id\n\n  alias {\n    evaluate_target_health = true\n    name                   = aws_api_gateway_domain_name.example.regional_domain_name\n    zone_id                = aws_api_gateway_domain_name.example.regional_zone_id\n  }\n}\n```\n\n## Argument Reference\n\nThis resource supports the following arguments:\n\n* `domain_name` - (Required) Fully-qualified domain name to register.\n* `endpoint_configuration` - (Optional) Configuration block defining API endpoint information including type. See below.\n* `mutual_tls_authentication` - (Optional) Mutual TLS authentication configuration for the domain name. See below.\n* `ownership_verification_certificate_arn` - (Optional) ARN of the AWS-issued certificate used to validate custom domain ownership (when `certificate_arn` is issued via an ACM Private CA or `mutual_tls_authentication` is configured with an ACM-imported certificate.)\n* `security_policy` - (Optional) Transport Layer Security (TLS) version + cipher suite for this DomainName. Valid values are `TLS_1_0` and `TLS_1_2`. Must be configured to perform drift detection.\n* `tags` - (Optional) Key-value map of resource tags. If configured with a provider [`default_tags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block) present, tags with matching keys will overwrite those defined at the provider-level.\n\nWhen referencing an AWS-managed certificate, the following arguments are supported:\n\n* `certificate_arn` - (Optional) ARN for an AWS-managed certificate. AWS Certificate Manager is the only supported source. Used when an edge-optimized domain name is desired. Conflicts with `certificate_name`, `certificate_body`, `certificate_chain`, `certificate_private_key`, `regional_certificate_arn`, and `regional_certificate_name`.\n* `regional_certificate_arn` - (Optional) ARN for an AWS-managed certificate. AWS Certificate Manager is the only supported source. Used when a regional domain name is desired. Conflicts with `certificate_arn`, `certificate_name`, `certificate_body`, `certificate_chain`, and `certificate_private_key`.\n\nWhen uploading a certificate, the following arguments are supported:\n\n* `certificate_body` - (Optional) Certificate issued for the domain name being registered, in PEM format. Only valid for `EDGE` endpoint configuration type. Conflicts with `certificate_arn`, `regional_certificate_arn`, and `regional_certificate_name`.\n* `certificate_chain` - (Optional) Certificate for the CA that issued the certificate, along with any intermediate CA certificates required to create an unbroken chain to a certificate trusted by the intended API clients. Only valid for `EDGE` endpoint configuration type. Conflicts with `certificate_arn`, `regional_certificate_arn`, and `regional_certificate_name`.\n* `certificate_name` - (Optional) Unique name to use when registering this certificate as an IAM server certificate. Conflicts with `certificate_arn`, `regional_certificate_arn`, and `regional_certificate_name`. Required if `certificate_arn` is not set.\n* `certificate_private_key` - (Optional) Private key associated with the domain certificate given in `certificate_body`. Only valid for `EDGE` endpoint configuration type. Conflicts with `certificate_arn`, `regional_certificate_arn`, and `regional_certificate_name`.\n* `regional_certificate_name` - (Optional) User-friendly name of the certificate that will be used by regional endpoint for this domain name. Conflicts with `certificate_arn`, `certificate_name`, `certificate_body`, `certificate_chain`, and `certificate_private_key`.\n\n### endpoint_configuration\n\n* `types` - (Required) List of endpoint types. This resource currently only supports managing a single value. Valid values: `EDGE` or `REGIONAL`. If unspecified, defaults to `EDGE`. Must be declared as `REGIONAL` in non-Commercial partitions. Refer to the [documentation](https://docs.aws.amazon.com/apigateway/latest/developerguide/create-regional-api.html) for more information on the difference between edge-optimized and regional APIs.\n\n### mutual_tls_authentication\n\n* `truststore_uri` - (Required) Amazon S3 URL that specifies the truststore for mutual TLS authentication, for example, `s3://bucket-name/key-name`. The truststore can contain certificates from public or private certificate authorities. To update the truststore, upload a new version to S3, and then update your custom domain name to use the new version.\n* `truststore_version` - (Optional) Version of the S3 object that contains the truststore. To specify a version, you must have versioning enabled for the S3 bucket.\n\n## Attribute Reference\n\nThis resource exports the following attributes in addition to the arguments above:\n\n* `arn` - ARN of domain name.\n* `certificate_upload_date` - Upload date associated with the domain certificate.\n* `cloudfront_domain_name` - Hostname created by Cloudfront to represent the distribution that implements this domain name mapping.\n* `cloudfront_zone_id` - For convenience, the hosted zone ID (`Z2FDTNDATAQYW2`) that can be used to create a Route53 alias record for the distribution.\n* `id` - Internal identifier assigned to this domain name by API Gateway.\n* `regional_domain_name` - Hostname for the custom domain's regional endpoint.\n* `regional_zone_id` - Hosted zone ID that can be used to create a Route53 alias record for the regional endpoint.\n* `tags_all` - Map of tags assigned to the resource, including those inherited from the provider [`default_tags` configuration block](https://registry.terraform.io/providers/hashicorp/aws/latest/docs#default_tags-configuration-block).\n\n## Import\n\nIn Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import API Gateway domain names using their `name`. For example:\n\n```terraform\nimport {\n  to = aws_api_gateway_domain_name.example\n  id = \"dev.example.com\"\n}\n```\n\nUsing `terraform import`, import API Gateway domain names using their `name`. For example:\n\n```console\n% terraform import aws_api_gateway_domain_name.example dev.example.com\n```\n",
      "language": "hcl",
      "path": "website/docs/r/api_gateway_domain_name.html.markdown",
      "slug": "api_gateway_domain_name",
      "subcategory": "API Gateway",
      "title": "api_gateway_domain_name",
      "truncated": false
    },
    "links": {
      "self": "/v2/provider-docs/3224848"
    }
  }
}