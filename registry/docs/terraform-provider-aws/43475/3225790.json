{
  "data": {
    "type": "provider-docs",
    "id": "3225790",
    "attributes": {
      "category": "resources",
      "content": "---\nsubcategory: \"S3 (Simple Storage)\"\nlayout: \"aws\"\npage_title: \"AWS: aws_s3_bucket_object_lock_configuration\"\ndescription: |-\n  Provides an S3 bucket Object Lock configuration resource.\n---\n\n# Resource: aws_s3_bucket_object_lock_configuration\n\nProvides an S3 bucket Object Lock configuration resource. For more information about Object Locking, go to [Using S3 Object Lock](https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html) in the Amazon S3 User Guide.\n\n~> **NOTE:** This resource **does not enable** Object Lock for **new** buckets. It configures a default retention period for objects placed in the specified bucket.\nThus, to **enable** Object Lock for a **new** bucket, see the [Using object lock configuration](s3_bucket.html.markdown#using-object-lock-configuration) section in  the `aws_s3_bucket` resource or the [Object Lock configuration for a new bucket](#object-lock-configuration-for-a-new-bucket) example below.\nIf you want to **enable** Object Lock for an **existing** bucket, contact AWS Support and see the [Object Lock configuration for an existing bucket](#object-lock-configuration-for-an-existing-bucket) example below.\n\n## Example Usage\n\n### Object Lock configuration for a new bucket\n\n```terraform\nresource \"aws_s3_bucket\" \"example\" {\n  bucket = \"mybucket\"\n\n  object_lock_enabled = true\n}\n\nresource \"aws_s3_bucket_object_lock_configuration\" \"example\" {\n  bucket = aws_s3_bucket.example.id\n\n  rule {\n    default_retention {\n      mode = \"COMPLIANCE\"\n      days = 5\n    }\n  }\n}\n```\n\n### Object Lock configuration for an existing bucket\n\nThis is a multistep process that requires AWS Support intervention.\n\n1. Enable versioning on your S3 bucket, if you have not already done so.\nDoing so will generate an \"Object Lock token\" in the back-end.\n\n<!-- markdownlint-disable MD029 -->\n```terraform\nresource \"aws_s3_bucket\" \"example\" {\n  bucket = \"mybucket\"\n}\n\nresource \"aws_s3_bucket_versioning\" \"example\" {\n  bucket = aws_s3_bucket.example.id\n\n  versioning_configuration {\n    status = \"Enabled\"\n  }\n}\n```\n<!-- markdownlint-disable MD029 -->\n\n2. Contact AWS Support to provide you with the \"Object Lock token\" for the specified bucket and use the token (or token ID) within your new `aws_s3_bucket_object_lock_configuration` resource.\n   Notice the `object_lock_enabled` argument does not need to be specified as it defaults to `Enabled`.\n\n<!-- markdownlint-disable MD029 -->\n```terraform\nresource \"aws_s3_bucket_object_lock_configuration\" \"example\" {\n  bucket = aws_s3_bucket.example.id\n\n  rule {\n    default_retention {\n      mode = \"COMPLIANCE\"\n      days = 5\n    }\n  }\n\n  token = \"NG2MKsfoLqV3A+aquXneSG4LOu/ekrlXkRXwIPFVfERT7XOPos+/k444d7RIH0E3W3p5QU6ml2exS2F/eYCFmMWHJ3hFZGk6al1sIJkmNhUMYmsv0jYVQyTTZNLM+DnfooA6SATt39mM1VW1yJh4E+XljMlWzaBwHKbss3/EjlGDjOmVhaSs4Z6427mMCaFD0RLwsYY7zX49gEc31YfOMJGxbXCXSeyNwAhhM/A8UH7gQf38RmjHjjAFbbbLtl8arsxTPW8F1IYohqwmKIr9DnotLLj8Tg44U2SPwujVaqmlKKP9s41rfgb4UbIm7khSafDBng0LGfxC4pMlT9Ny2w==\"\n}\n```\n<!-- markdownlint-disable MD029 -->\n\n## Argument Reference\n\nThis resource supports the following arguments:\n\n* `bucket` - (Required, Forces new resource) Name of the bucket.\n* `expected_bucket_owner` - (Optional, Forces new resource) Account ID of the expected bucket owner.\n* `object_lock_enabled` - (Optional, Forces new resource) Indicates whether this bucket has an Object Lock configuration enabled. Defaults to `Enabled`. Valid values: `Enabled`.\n* `rule` - (Optional) Configuration block for specifying the Object Lock rule for the specified object. [See below](#rule).\n* `token` - (Optional) Token to allow Object Lock to be enabled for an existing bucket. You must contact AWS support for the bucket's \"Object Lock token\".\nThe token is generated in the back-end when [versioning](https://docs.aws.amazon.com/AmazonS3/latest/userguide/manage-versioning-examples.html) is enabled on a bucket. For more details on versioning, see the [`aws_s3_bucket_versioning` resource](s3_bucket_versioning.html.markdown).\n\n### rule\n\nThe `rule` configuration block supports the following arguments:\n\n* `default_retention` - (Required) Configuration block for specifying the default Object Lock retention settings for new objects placed in the specified bucket. [See below](#default_retention).\n\n### default_retention\n\nThe `default_retention` configuration block supports the following arguments:\n\n* `days` - (Optional, Required if `years` is not specified) Number of days that you want to specify for the default retention period.\n* `mode` - (Required) Default Object Lock retention mode you want to apply to new objects placed in the specified bucket. Valid values: `COMPLIANCE`, `GOVERNANCE`.\n* `years` - (Optional, Required if `days` is not specified) Number of years that you want to specify for the default retention period.\n\n## Attribute Reference\n\nThis resource exports the following attributes in addition to the arguments above:\n\n* `id` - The `bucket` or `bucket` and `expected_bucket_owner` separated by a comma (`,`) if the latter is provided.\n\n## Import\n\nIn Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import S3 bucket Object Lock configuration using the `bucket` or using the `bucket` and `expected_bucket_owner` separated by a comma (`,`). For example:\n\nIf the owner (account ID) of the source bucket is the same account used to configure the Terraform AWS Provider, import using the `bucket`:\n\n```terraform\nimport {\n  to = aws_s3_bucket_object_lock_configuration.example\n  id = \"bucket-name\"\n}\n```\n\nIf the owner (account ID) of the source bucket differs from the account used to configure the Terraform AWS Provider, import using the `bucket` and `expected_bucket_owner` separated by a comma (`,`):\n\nimport {\n  to = aws_s3_bucket_object_lock_configuration.example\n  id = \"bucket-name,123456789012\"\n}\n\n**Using `terraform import` to import** S3 bucket Object Lock configuration using the `bucket` or using the `bucket` and `expected_bucket_owner` separated by a comma (`,`). For example:\n\nIf the owner (account ID) of the source bucket is the same account used to configure the Terraform AWS Provider, import using the `bucket`:\n\n```console\n% terraform import aws_s3_bucket_object_lock_configuration.example bucket-name\n```\n\nIf the owner (account ID) of the source bucket differs from the account used to configure the Terraform AWS Provider, import using the `bucket` and `expected_bucket_owner` separated by a comma (`,`):\n\n```console\n% terraform import aws_s3_bucket_object_lock_configuration.example bucket-name,123456789012\n```\n",
      "language": "hcl",
      "path": "website/docs/r/s3_bucket_object_lock_configuration.html.markdown",
      "slug": "s3_bucket_object_lock_configuration",
      "subcategory": "S3 (Simple Storage)",
      "title": "s3_bucket_object_lock_configuration",
      "truncated": false
    },
    "links": {
      "self": "/v2/provider-docs/3225790"
    }
  }
}