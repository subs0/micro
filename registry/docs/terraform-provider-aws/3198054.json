{
  "data": {
    "type": "provider-docs",
    "id": "3198054",
    "attributes": {
      "category": "resources",
      "content": "---\nsubcategory: \"Chime SDK Media Pipelines\"\nlayout: \"aws\"\npage_title: \"AWS: aws_chimesdkmediapipelines_media_insights_pipeline_configuration\"\ndescription: |-\n  Terraform resource for managing an AWS Chime SDK Media Pipelines Media Insights Pipeline Configuration.\n---\n\n# Resource: aws_chimesdkmediapipelines_media_insights_pipeline_configuration\n\nTerraform resource for managing an AWS Chime SDK Media Pipelines Media Insights Pipeline Configuration.\nConsult the [Call analytics developer guide](https://docs.aws.amazon.com/chime-sdk/latest/dg/call-analytics.html) for more detailed information about usage.\n\n## Example Usage\n\n### Basic Usage\n\n```terraform\nresource \"aws_chimesdkmediapipelines_media_insights_pipeline_configuration\" \"my_configuration\" {\n  name                     = \"MyBasicConfiguration\"\n  resource_access_role_arn = aws_iam_role.call_analytics_role.arn\n  elements {\n    type = \"AmazonTranscribeCallAnalyticsProcessor\"\n    amazon_transcribe_call_analytics_processor_configuration {\n      language_code = \"en-US\"\n    }\n  }\n\n  elements {\n    type = \"KinesisDataStreamSink\"\n    kinesis_data_stream_sink_configuration {\n      insights_target = aws_kinesis_stream.example.arn\n    }\n  }\n\n  tags = {\n    Key1 = \"Value1\"\n    Key2 = \"Value2\"\n  }\n}\n\nresource \"aws_kinesis_stream\" \"example\" {\n  name        = \"example\"\n  shard_count = 2\n}\n\ndata \"aws_iam_policy_document\" \"media_pipelines_assume_role\" {\n  statement {\n    effect = \"Allow\"\n\n    principals {\n      type        = \"Service\"\n      identifiers = [\"mediapipelines.chime.amazonaws.com\"]\n    }\n\n    actions = [\"sts:AssumeRole\"]\n  }\n}\n\nresource \"aws_iam_role\" \"call_analytics_role\" {\n  name               = \"CallAnalyticsRole\"\n  assume_role_policy = data.aws_iam_policy_document.media_pipelines_assume_role.json\n}\n```\n\n- The required policies on `call_analytics_role` will vary based on the selected processors. See [Call analytics resource access role](https://docs.aws.amazon.com/chime-sdk/latest/dg/ca-resource-access-role.html) for directions on choosing appropriate policies.\n\n### Transcribe Call Analytics processor usage\n\n```terraform\nresource \"aws_chimesdkmediapipelines_media_insights_pipeline_configuration\" \"my_configuration\" {\n  name                     = \"MyCallAnalyticsConfiguration\"\n  resource_access_role_arn = aws_iam_role.example.arn\n  elements {\n    type = \"AmazonTranscribeCallAnalyticsProcessor\"\n    amazon_transcribe_call_analytics_processor_configuration {\n      call_analytics_stream_categories = [\n        \"category_1\",\n        \"category_2\"\n      ]\n      content_redaction_type               = \"PII\"\n      enable_partial_results_stabilization = true\n      filter_partial_results               = true\n      language_code                        = \"en-US\"\n      language_model_name                  = \"MyLanguageModel\"\n      partial_results_stability            = \"high\"\n      pii_entity_types                     = \"ADDRESS,BANK_ACCOUNT_NUMBER\"\n      post_call_analytics_settings {\n        content_redaction_output     = \"redacted\"\n        data_access_role_arn         = aws_iam_role.post_call_role.arn\n        output_encryption_kms_key_id = \"MyKmsKeyId\"\n        output_location              = \"s3://MyBucket\"\n      }\n      vocabulary_filter_method = \"mask\"\n      vocabulary_filter_name   = \"MyVocabularyFilter\"\n      vocabulary_name          = \"MyVocabulary\"\n    }\n  }\n\n  elements {\n    type = \"KinesisDataStreamSink\"\n    kinesis_data_stream_sink_configuration {\n      insights_target = aws_kinesis_stream.example.arn\n    }\n  }\n}\n\ndata \"aws_iam_policy_document\" \"transcribe_assume_role\" {\n  statement {\n    effect = \"Allow\"\n\n    principals {\n      type        = \"Service\"\n      identifiers = [\"transcribe.amazonaws.com\"]\n    }\n\n    actions = [\"sts:AssumeRole\"]\n  }\n}\n\nresource \"aws_iam_role\" \"post_call_role\" {\n  name               = \"PostCallAccessRole\"\n  assume_role_policy = data.aws_iam_policy_document.transcribe_assume_role.json\n}\n```\n\n### Real time alerts usage\n\n```terraform\nresource \"aws_chimesdkmediapipelines_media_insights_pipeline_configuration\" \"my_configuration\" {\n  name                     = \"MyRealTimeAlertConfiguration\"\n  resource_access_role_arn = aws_iam_role.call_analytics_role.arn\n  elements {\n    type = \"AmazonTranscribeCallAnalyticsProcessor\"\n    amazon_transcribe_call_analytics_processor_configuration {\n      language_code = \"en-US\"\n    }\n  }\n\n  elements {\n    type = \"KinesisDataStreamSink\"\n    kinesis_data_stream_sink_configuration {\n      insights_target = aws_kinesis_stream.example.arn\n    }\n  }\n\n  real_time_alert_configuration {\n    disabled = false\n\n    rules {\n      type = \"IssueDetection\"\n      issue_detection_configuration {\n        rule_name = \"MyIssueDetectionRule\"\n      }\n    }\n\n    rules {\n      type = \"KeywordMatch\"\n      keyword_match_configuration {\n        keywords  = [\"keyword1\", \"keyword2\"]\n        negate    = false\n        rule_name = \"MyKeywordMatchRule\"\n      }\n    }\n\n    rules {\n      type = \"Sentiment\"\n      sentiment_configuration {\n        rule_name      = \"MySentimentRule\"\n        sentiment_type = \"NEGATIVE\"\n        time_period    = 60\n      }\n    }\n  }\n}\n```\n\n### Transcribe processor usage\n\n```terraform\nresource \"aws_chimesdkmediapipelines_media_insights_pipeline_configuration\" \"my_configuration\" {\n  name                     = \"MyTranscribeConfiguration\"\n  resource_access_role_arn = aws_iam_role.example.arn\n  elements {\n    type = \"AmazonTranscribeProcessor\"\n    amazon_transcribe_processor_configuration {\n      content_identification_type          = \"PII\"\n      enable_partial_results_stabilization = true\n      filter_partial_results               = true\n      language_code                        = \"en-US\"\n      language_model_name                  = \"MyLanguageModel\"\n      partial_results_stability            = \"high\"\n      pii_entity_types                     = \"ADDRESS,BANK_ACCOUNT_NUMBER\"\n      show_speaker_label                   = true\n      vocabulary_filter_method             = \"mask\"\n      vocabulary_filter_name               = \"MyVocabularyFilter\"\n      vocabulary_name                      = \"MyVocabulary\"\n    }\n  }\n\n  elements {\n    type = \"KinesisDataStreamSink\"\n    kinesis_data_stream_sink_configuration {\n      insights_target = aws_kinesis_stream.example.arn\n    }\n  }\n}\n```\n\n### Voice analytics processor usage\n\n```terraform\nresource \"aws_chimesdkmediapipelines_media_insights_pipeline_configuration\" \"my_configuration\" {\n  name                     = \"MyVoiceAnalyticsConfiguration\"\n  resource_access_role_arn = aws_iam_role.example.arn\n  elements {\n    type = \"VoiceAnalyticsProcessor\"\n    voice_analytics_processor_configuration {\n      speaker_search_status      = \"Enabled\"\n      voice_tone_analysis_status = \"Enabled\"\n    }\n  }\n\n  elements {\n    type = \"LambdaFunctionSink\"\n    lambda_function_sink_configuration {\n      insights_target = \"arn:aws:lambda:us-west-2:1111111111:function:MyFunction\"\n    }\n  }\n\n  elements {\n    type = \"SnsTopicSink\"\n    sns_topic_sink_configuration {\n      insights_target = \"arn:aws:sns:us-west-2:1111111111:topic/MyTopic\"\n    }\n  }\n\n  elements {\n    type = \"SqsQueueSink\"\n    sqs_queue_sink_configuration {\n      insights_target = \"arn:aws:sqs:us-west-2:1111111111:queue/MyQueue\"\n    }\n  }\n\n  elements {\n    type = \"KinesisDataStreamSink\"\n    kinesis_data_stream_sink_configuration {\n      insights_target = aws_kinesis_stream.test.arn\n    }\n  }\n}\n```\n\n### S3 Recording sink usage\n\n```terraform\nresource \"aws_chimesdkmediapipelines_media_insights_pipeline_configuration\" \"my_configuration\" {\n  name                     = \"MyS3RecordingConfiguration\"\n  resource_access_role_arn = aws_iam_role.example.arn\n  elements {\n    type = \"S3RecordingSink\"\n    s3_recording_sink_configuration {\n      destination = \"arn:aws:s3:::MyBucket\"\n    }\n  }\n}\n```\n\n## Argument Reference\n\nThis resource supports the following arguments:\n\n* `name` - (Required) Configuration name.\n* `resource_access_role_arn` - (Required) ARN of IAM Role used by service to invoke processors and sinks specified by configuration elements.\n* `elements` - (Required) Collection of processors and sinks to transform media and deliver data.\n* `real_time_alert_configuration` - (Optional) Configuration for real-time alert rules to send EventBridge notifications when certain conditions are met.\n* `tags` - (Optional) Key-value map of tags for the resource.\n\n### Elements\n\n* `type` - (Required) Element type.\n* `amazon_transcribe_call_analytics_processor_configuration` - (Optional) Configuration for Amazon Transcribe Call Analytics processor.\n    * `call_analytics_stream_categories` - (Optional) Filter for category events to be delivered to insights target.\n    * `content_identification_type` - (Optional) Labels all personally identifiable information (PII) identified in Utterance events.\n    * `content_redaction_type` - (Optional) Redacts all personally identifiable information (PII) identified in Utterance events.\n    * `enable_partial_results_stabilization` - (Optional) Enables partial result stabilization in Utterance events.\n    * `filter_partial_results` - (Optional) Filters partial Utterance events from delivery to the insights target.\n    * `language_code` - (Required) Language code for the transcription model.\n    * `language_model_name` - (Optional) Name of custom language model for transcription.\n    * `partial_results_stability` - (Optional) Level of stability to use when partial results stabilization is enabled.\n    * `pii_entity_types` - (Optional) Types of personally identifiable information (PII) to redact from an Utterance event.\n    * `post_call_analytics_settings` - (Optional) Settings for post call analytics.\n        * `content_redaction_output` - (Optional) Should output be redacted.\n        * `data_access_role_arn` - (Required) ARN of the role used by AWS Transcribe to upload your post call analysis.\n        * `output_encryption_kms_key_id` - (Optional) ID of the KMS key used to encrypt the output.\n        * `output_location` - (Required) The Amazon S3 location where you want your Call Analytics post-call transcription output stored.\n    * `vocabulary_filter_method` - (Optional) Method for applying a vocabulary filter to Utterance events.\n    * `vocabulary_filter_name` - (Optional) Name of the custom vocabulary filter to use when processing Utterance events.\n    * `vocabulary_name` - (Optional) Name of the custom vocabulary to use when processing Utterance events.\n* `amazon_transcribe_processor_configuration` - (Optional) Configuration for Amazon Transcribe processor.\n    * `content_identification_type` - (Optional) Labels all personally identifiable information (PII) identified in Transcript events.\n    * `content_redaction_type` - (Optional) Redacts all personally identifiable information (PII) identified in Transcript events.\n    * `enable_partial_results_stabilization` - (Optional) Enables partial result stabilization in Transcript events.\n    * `filter_partial_results` - (Optional) Filters partial Utterance events from delivery to the insights target.\n    * `language_code` - (Required) Language code for the transcription model.\n    * `language_model_name` - (Optional) Name of custom language model for transcription.\n    * `partial_results_stability` - (Optional) Level of stability to use when partial results stabilization is enabled.\n    * `pii_entity_types` - (Optional) Types of personally identifiable information (PII) to redact from a Transcript event.\n    * `show_speaker_label` - (Optional) Enables speaker partitioning (diarization) in your Transcript events.\n    * `vocabulary_filter_method` - (Optional) Method for applying a vocabulary filter to Transcript events.\n    * `vocabulary_filter_name` - (Optional) Name of the custom vocabulary filter to use when processing Transcript events.\n    * `vocabulary_name` - (Optional) Name of the custom vocabulary to use when processing Transcript events.\n* `kinesis_data_stream_sink_configuration` - (Optional) Configuration for Kinesis Data Stream sink.\n    * `insights_target` - (Required) Kinesis Data Stream to deliver results.\n* `lambda_function_sink_configuration` - (Optional) Configuration for Lambda Function sink.\n    * `insights_target` - (Required) Lambda Function to deliver results.\n* `sns_topic_sink_configuration` - (Optional) Configuration for SNS Topic sink.\n    * `insights_target` - (Required) SNS topic to deliver results.\n* `sqs_queue_sink_configuration` - (Optional) Configuration for SQS Queue sink.\n    * `insights_target` - (Required) SQS queue to deliver results.\n* `s3_recording_sink_configuration` - (Optional) Configuration for S3 recording sink.\n    * `destination` - (Required) S3 URI to deliver recordings.\n* `voice_analytics_processor_configuration` - (Optional) Configuration for Voice analytics processor.\n    * `speaker_search_status` - (Required) Enable speaker search.\n    * `voice_tone_analysis_status` - (Required) Enable voice tone analysis.\n\n### Real time alert configuration\n\n* `rules` - (Required) Collection of real time alert rules\n    * `type` - (Required) Rule type.\n    * `issue_detection_configuration` - (Optional) Configuration for an issue detection rule.\n        * `rule_name` - (Required) Rule name.\n    * `keyword_match_configuration` - (Optional) Configuration for a keyword match rule.\n        * `rule_name` - (Required) Rule name.\n        * `keywords` - (Required) Collection of keywords to match.\n        * `negate` - (Optional) Negate the rule.\n    * `sentiment_configuration` - (Optional) Configuration for a sentiment rule.\n        * `rule_name` - (Required) Rule name.\n        * `sentiment_type` - (Required) Sentiment type to match.\n        * `time_period` - (Optional) Analysis interval.\n* `disabled` - (Optional) Disables real time alert rules.\n\n## Attribute Reference\n\nThis resource exports the following attributes in addition to the arguments above:\n\n* `arn` - ARN of the Media Insights Pipeline Configuration.\n* `id` - Unique ID of the Media Insights Pipeline Configuration.\n\n## Timeouts\n\n[Configuration options](https://developer.hashicorp.com/terraform/language/resources/syntax#operation-timeouts):\n\n* `create` - (Default `3m`)\n* `update` - (Default `3m`)\n* `delete` - (Default `30s`)\n\n## Import\n\nIn Terraform v1.5.0 and later, use an [`import` block](https://developer.hashicorp.com/terraform/language/import) to import Chime SDK Media Pipelines Media Insights Pipeline Configuration using the `id`. For example:\n\n```terraform\nimport {\n  to = aws_chimesdkmediapipelines_media_insights_pipeline_configuration.example\n  id = \"abcdef123456\"\n}\n```\n\nUsing `terraform import`, import Chime SDK Media Pipelines Media Insights Pipeline Configuration using the `id`. For example:\n\n```console\n% terraform import aws_chimesdkmediapipelines_media_insights_pipeline_configuration.example abcdef123456\n```\n",
      "language": "hcl",
      "path": "website/docs/r/chimesdkmediapipelines_media_insights_pipeline_configuration.html.markdown",
      "slug": "chimesdkmediapipelines_media_insights_pipeline_configuration",
      "subcategory": "Chime SDK Media Pipelines",
      "title": "chimesdkmediapipelines_media_insights_pipeline_configuration",
      "truncated": false
    },
    "links": {
      "self": "/v2/provider-docs/3198054"
    }
  }
}