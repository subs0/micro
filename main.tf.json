{
    "resource": {
        "aws_efs_file_system": {
            "pig_efs": {
                "creation_token": "pig-001",
                "tags": {
                    "Source": "Micro"
                }
            }
        },
        "aws_iam_role": {
            "pig_role": {
                "name": "pig-role",
                "assume_role_policy": "${data.aws_iam_policy_document.policy_doc.json}"
            }
        },
        "aws_lambda_function": {
            "pig_lambda": {
                "function_name": "pig",
                "role": "${resource.aws_iam_role.pig_role.arn}",
                "description": "A pig lambda",
                "filename": "lambdas/template/zipped/handler.py.zip",
                "handler": "handler.handler",
                "runtime": "python3.8",
                "ephemeral_storage": {
                    "size": 512
                },
                "file_system_config": {},
                "environment": {
                    "variables": {
                        "FOO": "bar"
                    }
                }
            }
        }
    },
    "data": {
        "aws_iam_policy_document": {
            "policy_doc": {
                "statement": {
                    "effect": "Allow",
                    "actions": [
                        "sts:AssumeRole"
                    ],
                    "principals": {
                        "identifiers": [
                            "lambda.amazonaws.com"
                        ],
                        "type": "Service"
                    }
                }
            }
        }
    },
    "provider": [
        {
            "aws": {
                "region": "us-east-2",
                "profile": "chopshop"
            }
        }
    ]
}